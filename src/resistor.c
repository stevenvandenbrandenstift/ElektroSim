/* resistor.c generated by valac 0.24.0, the Vala compiler
 * generated from resistor.vala, do not modify */

/* -*- Mode: vala; indent-tabs-mode: t; c-basic-offset: 4; tab-width: 4 -*-  */
/*
 * resistor.vala
 * Copyright (C) 2014 Steven Vanden Branden <StevenVandenBrandenstift@gmail.com>
 *
 * ElektroSim is free software: you can redistribute it and/or modify it
 * under the terms of the GNU General Public License as published by the
 * Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * ElektroSim is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License along
 * with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <cairo.h>
#include <stdlib.h>
#include <string.h>
#include <gee.h>
#include <float.h>
#include <math.h>


#define ELEKTRO_SIM_TYPE_COMPONENT (elektro_sim_component_get_type ())
#define ELEKTRO_SIM_COMPONENT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), ELEKTRO_SIM_TYPE_COMPONENT, ElektroSimComponent))
#define ELEKTRO_SIM_COMPONENT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), ELEKTRO_SIM_TYPE_COMPONENT, ElektroSimComponentClass))
#define ELEKTRO_SIM_IS_COMPONENT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), ELEKTRO_SIM_TYPE_COMPONENT))
#define ELEKTRO_SIM_IS_COMPONENT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), ELEKTRO_SIM_TYPE_COMPONENT))
#define ELEKTRO_SIM_COMPONENT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), ELEKTRO_SIM_TYPE_COMPONENT, ElektroSimComponentClass))

typedef struct _ElektroSimComponent ElektroSimComponent;
typedef struct _ElektroSimComponentClass ElektroSimComponentClass;
typedef struct _ElektroSimComponentPrivate ElektroSimComponentPrivate;

#define ELEKTRO_SIM_TYPE_PARAMETER (elektro_sim_parameter_get_type ())
#define ELEKTRO_SIM_PARAMETER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), ELEKTRO_SIM_TYPE_PARAMETER, ElektroSimParameter))
#define ELEKTRO_SIM_PARAMETER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), ELEKTRO_SIM_TYPE_PARAMETER, ElektroSimParameterClass))
#define ELEKTRO_SIM_IS_PARAMETER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), ELEKTRO_SIM_TYPE_PARAMETER))
#define ELEKTRO_SIM_IS_PARAMETER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), ELEKTRO_SIM_TYPE_PARAMETER))
#define ELEKTRO_SIM_PARAMETER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), ELEKTRO_SIM_TYPE_PARAMETER, ElektroSimParameterClass))

typedef struct _ElektroSimParameter ElektroSimParameter;
typedef struct _ElektroSimParameterClass ElektroSimParameterClass;

#define ELEKTRO_SIM_TYPE_POINT (elektro_sim_point_get_type ())
#define ELEKTRO_SIM_POINT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), ELEKTRO_SIM_TYPE_POINT, ElektroSimPoint))
#define ELEKTRO_SIM_POINT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), ELEKTRO_SIM_TYPE_POINT, ElektroSimPointClass))
#define ELEKTRO_SIM_IS_POINT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), ELEKTRO_SIM_TYPE_POINT))
#define ELEKTRO_SIM_IS_POINT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), ELEKTRO_SIM_TYPE_POINT))
#define ELEKTRO_SIM_POINT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), ELEKTRO_SIM_TYPE_POINT, ElektroSimPointClass))

typedef struct _ElektroSimPoint ElektroSimPoint;
typedef struct _ElektroSimPointClass ElektroSimPointClass;

#define ELEKTRO_SIM_TYPE_RESISTOR (elektro_sim_resistor_get_type ())
#define ELEKTRO_SIM_RESISTOR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), ELEKTRO_SIM_TYPE_RESISTOR, ElektroSimResistor))
#define ELEKTRO_SIM_RESISTOR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), ELEKTRO_SIM_TYPE_RESISTOR, ElektroSimResistorClass))
#define ELEKTRO_SIM_IS_RESISTOR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), ELEKTRO_SIM_TYPE_RESISTOR))
#define ELEKTRO_SIM_IS_RESISTOR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), ELEKTRO_SIM_TYPE_RESISTOR))
#define ELEKTRO_SIM_RESISTOR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), ELEKTRO_SIM_TYPE_RESISTOR, ElektroSimResistorClass))

typedef struct _ElektroSimResistor ElektroSimResistor;
typedef struct _ElektroSimResistorClass ElektroSimResistorClass;
typedef struct _ElektroSimResistorPrivate ElektroSimResistorPrivate;

#define ELEKTRO_SIM_PARAMETER_TYPE_WIDGET_STYLE (elektro_sim_parameter_widget_style_get_type ())
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _elektro_sim_point_unref0(var) ((var == NULL) ? NULL : (var = (elektro_sim_point_unref (var), NULL)))

#define ELEKTRO_SIM_COMPONENT_TYPE_ORIENTATION (elektro_sim_component_orientation_get_type ())
#define _g_free0(var) (var = (g_free (var), NULL))

#define ELEKTRO_SIM_COMPONENT_TYPE_COMPONENT_TYPE (elektro_sim_component_component_type_get_type ())

struct _ElektroSimComponent {
	GtkListBoxRow parent_instance;
	ElektroSimComponentPrivate * priv;
	GeeArrayList* parameters;
	GeeArrayList* connections;
	cairo_surface_t* image_surface;
	cairo_t* image_context;
	cairo_surface_t* emoticon_surface;
	cairo_t* emoticon_context;
};

struct _ElektroSimComponentClass {
	GtkListBoxRowClass parent_class;
	ElektroSimComponent* (*clone) (ElektroSimComponent* self);
	void (*snap) (ElektroSimComponent* self, gint range, gint x, gint y);
	void (*draw_image) (ElektroSimComponent* self, cairo_t* cr);
	void (*clear_counter) (ElektroSimComponent* self);
	gchar* (*get_netlist_line) (ElektroSimComponent* self);
};

struct _ElektroSimResistor {
	ElektroSimComponent parent_instance;
	ElektroSimResistorPrivate * priv;
};

struct _ElektroSimResistorClass {
	ElektroSimComponentClass parent_class;
};

typedef enum  {
	ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_NONE,
	ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_LABEL,
	ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_ENTRY,
	ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_OPTIONS,
	ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER
} ElektroSimParameterWidgetStyle;

typedef enum  {
	ELEKTRO_SIM_COMPONENT_ORIENTATION_NONE,
	ELEKTRO_SIM_COMPONENT_ORIENTATION_RIGHT,
	ELEKTRO_SIM_COMPONENT_ORIENTATION_LEFT,
	ELEKTRO_SIM_COMPONENT_ORIENTATION_DOWN,
	ELEKTRO_SIM_COMPONENT_ORIENTATION_UP
} ElektroSimComponentOrientation;

typedef enum  {
	ELEKTRO_SIM_COMPONENT_COMPONENT_TYPE_COMPONENT,
	ELEKTRO_SIM_COMPONENT_COMPONENT_TYPE_TEMPLATE,
	ELEKTRO_SIM_COMPONENT_COMPONENT_TYPE_SIMULATION
} ElektroSimComponentComponentType;


static gpointer elektro_sim_resistor_parent_class = NULL;
extern gint elektro_sim_resistor_counter;
gint elektro_sim_resistor_counter = 0;

GType elektro_sim_component_get_type (void) G_GNUC_CONST;
GType elektro_sim_parameter_get_type (void) G_GNUC_CONST;
gpointer elektro_sim_point_ref (gpointer instance);
void elektro_sim_point_unref (gpointer instance);
GParamSpec* elektro_sim_param_spec_point (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void elektro_sim_value_set_point (GValue* value, gpointer v_object);
void elektro_sim_value_take_point (GValue* value, gpointer v_object);
gpointer elektro_sim_value_get_point (const GValue* value);
GType elektro_sim_point_get_type (void) G_GNUC_CONST;
GType elektro_sim_resistor_get_type (void) G_GNUC_CONST;
enum  {
	ELEKTRO_SIM_RESISTOR_DUMMY_PROPERTY
};
ElektroSimResistor* elektro_sim_resistor_new (gdouble resistance, gdouble max_power);
ElektroSimResistor* elektro_sim_resistor_construct (GType object_type, gdouble resistance, gdouble max_power);
ElektroSimComponent* elektro_sim_component_construct (GType object_type, const gchar* name);
void elektro_sim_component_set_width (ElektroSimComponent* self, gint value);
void elektro_sim_component_set_height (ElektroSimComponent* self, gint value);
GType elektro_sim_parameter_widget_style_get_type (void) G_GNUC_CONST;
ElektroSimParameter* elektro_sim_component_add_parameter (ElektroSimComponent* self, const gchar* name, gdouble val, const gchar* unit, ElektroSimParameterWidgetStyle simulation, ElektroSimParameterWidgetStyle edit, GeeArrayList* options);
static void elektro_sim_resistor_real_draw_image (ElektroSimComponent* base, cairo_t* cr);
gint elektro_sim_point_get_x (ElektroSimPoint* self);
gint elektro_sim_point_get_y (ElektroSimPoint* self);
GType elektro_sim_component_orientation_get_type (void) G_GNUC_CONST;
ElektroSimComponentOrientation elektro_sim_component_get_orientation (ElektroSimComponent* self);
gint elektro_sim_component_get_width (ElektroSimComponent* self);
gint elektro_sim_component_get_height (ElektroSimComponent* self);
void elektro_sim_component_draw_emoticon (ElektroSimComponent* self, cairo_t* cr, gint x, gint y);
static void elektro_sim_resistor_real_clear_counter (ElektroSimComponent* base);
static ElektroSimComponent* elektro_sim_resistor_real_clone (ElektroSimComponent* base);
ElektroSimParameter* elektro_sim_component_get_parameter (ElektroSimComponent* self, const gchar* name);
gdouble elektro_sim_parameter_get_val (ElektroSimParameter* self);
void elektro_sim_component_set_name (ElektroSimComponent* self, const gchar* new_name);
GType elektro_sim_component_component_type_get_type (void) G_GNUC_CONST;
void elektro_sim_component_set_componentType (ElektroSimComponent* self, ElektroSimComponentComponentType value);
static void elektro_sim_resistor_real_snap (ElektroSimComponent* base, gint range, gint x, gint y);
ElektroSimPoint* elektro_sim_point_new (gint x, gint y);
ElektroSimPoint* elektro_sim_point_construct (GType object_type, gint x, gint y);
ElektroSimPoint* elektro_sim_point_point_nearby (ElektroSimPoint* self, gint range);
ElektroSimComponentOrientation elektro_sim_point_connect_component (ElektroSimPoint* self, ElektroSimComponent* component);
void elektro_sim_component_set_orientation (ElektroSimComponent* self, ElektroSimComponentOrientation value);
static gchar* elektro_sim_resistor_real_get_netlist_line (ElektroSimComponent* base);
gint elektro_sim_point_get_net (ElektroSimPoint* self);
static void elektro_sim_resistor_finalize (GObject* obj);


ElektroSimResistor* elektro_sim_resistor_construct (GType object_type, gdouble resistance, gdouble max_power) {
	ElektroSimResistor * self = NULL;
	gdouble _tmp0_ = 0.0;
	GeeArrayList* _tmp1_ = NULL;
	GeeArrayList* _tmp2_ = NULL;
	ElektroSimParameter* _tmp3_ = NULL;
	ElektroSimParameter* _tmp4_ = NULL;
	gdouble _tmp5_ = 0.0;
	GeeArrayList* _tmp6_ = NULL;
	GeeArrayList* _tmp7_ = NULL;
	ElektroSimParameter* _tmp8_ = NULL;
	ElektroSimParameter* _tmp9_ = NULL;
	GeeArrayList* _tmp10_ = NULL;
	GeeArrayList* _tmp11_ = NULL;
	ElektroSimParameter* _tmp12_ = NULL;
	ElektroSimParameter* _tmp13_ = NULL;
	GeeArrayList* _tmp14_ = NULL;
	GeeArrayList* _tmp15_ = NULL;
	ElektroSimParameter* _tmp16_ = NULL;
	ElektroSimParameter* _tmp17_ = NULL;
	GeeArrayList* _tmp18_ = NULL;
	GeeArrayList* _tmp19_ = NULL;
	ElektroSimParameter* _tmp20_ = NULL;
	ElektroSimParameter* _tmp21_ = NULL;
	GeeArrayList* _tmp22_ = NULL;
	GeeArrayList* _tmp23_ = NULL;
	ElektroSimParameter* _tmp24_ = NULL;
	ElektroSimParameter* _tmp25_ = NULL;
	self = (ElektroSimResistor*) elektro_sim_component_construct (object_type, "Resistor");
	elektro_sim_component_set_width ((ElektroSimComponent*) self, 250);
	elektro_sim_component_set_height ((ElektroSimComponent*) self, 50);
	_tmp0_ = resistance;
	_tmp1_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
	_tmp2_ = _tmp1_;
	_tmp3_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "R", _tmp0_, "\xe2\x84\xa6", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, _tmp2_);
	_tmp4_ = _tmp3_;
	_g_object_unref0 (_tmp4_);
	_g_object_unref0 (_tmp2_);
	_tmp5_ = max_power;
	_tmp6_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
	_tmp7_ = _tmp6_;
	_tmp8_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "Max Power", _tmp5_, "w", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, _tmp7_);
	_tmp9_ = _tmp8_;
	_g_object_unref0 (_tmp9_);
	_g_object_unref0 (_tmp7_);
	_tmp10_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
	_tmp11_ = _tmp10_;
	_tmp12_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "ac", (gdouble) 0, "V", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_LABEL, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_NONE, _tmp11_);
	_tmp13_ = _tmp12_;
	_g_object_unref0 (_tmp13_);
	_g_object_unref0 (_tmp11_);
	_tmp14_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
	_tmp15_ = _tmp14_;
	_tmp16_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "dtemp", (gdouble) 0, "t", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_NONE, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_NONE, _tmp15_);
	_tmp17_ = _tmp16_;
	_g_object_unref0 (_tmp17_);
	_g_object_unref0 (_tmp15_);
	_tmp18_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
	_tmp19_ = _tmp18_;
	_tmp20_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "bv_max", (gdouble) 0, "", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_NONE, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_NONE, _tmp19_);
	_tmp21_ = _tmp20_;
	_g_object_unref0 (_tmp21_);
	_g_object_unref0 (_tmp19_);
	_tmp22_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
	_tmp23_ = _tmp22_;
	_tmp24_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "noisy", (gdouble) 0, "", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_NONE, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_NONE, _tmp23_);
	_tmp25_ = _tmp24_;
	_g_object_unref0 (_tmp25_);
	_g_object_unref0 (_tmp23_);
	return self;
}


ElektroSimResistor* elektro_sim_resistor_new (gdouble resistance, gdouble max_power) {
	return elektro_sim_resistor_construct (ELEKTRO_SIM_TYPE_RESISTOR, resistance, max_power);
}


static void elektro_sim_resistor_real_draw_image (ElektroSimComponent* base, cairo_t* cr) {
	ElektroSimResistor * self;
	gint p1_x = 0;
	GeeArrayList* _tmp0_ = NULL;
	gpointer _tmp1_ = NULL;
	ElektroSimPoint* _tmp2_ = NULL;
	gint _tmp3_ = 0;
	gint _tmp4_ = 0;
	gint _tmp5_ = 0;
	gint p1_y = 0;
	GeeArrayList* _tmp6_ = NULL;
	gpointer _tmp7_ = NULL;
	ElektroSimPoint* _tmp8_ = NULL;
	gint _tmp9_ = 0;
	gint _tmp10_ = 0;
	gint _tmp11_ = 0;
	gint p2_x = 0;
	GeeArrayList* _tmp12_ = NULL;
	gpointer _tmp13_ = NULL;
	ElektroSimPoint* _tmp14_ = NULL;
	gint _tmp15_ = 0;
	gint _tmp16_ = 0;
	gint _tmp17_ = 0;
	gint p2_y = 0;
	GeeArrayList* _tmp18_ = NULL;
	gpointer _tmp19_ = NULL;
	ElektroSimPoint* _tmp20_ = NULL;
	gint _tmp21_ = 0;
	gint _tmp22_ = 0;
	gint _tmp23_ = 0;
	gint x = 0;
	gint y = 0;
	gboolean _tmp24_ = FALSE;
	ElektroSimComponentOrientation _tmp25_ = 0;
	ElektroSimComponentOrientation _tmp26_ = 0;
	cairo_t* _tmp127_ = NULL;
	gint _tmp128_ = 0;
	gint _tmp129_ = 0;
	self = (ElektroSimResistor*) base;
	g_return_if_fail (cr != NULL);
	_tmp0_ = ((ElektroSimComponent*) self)->connections;
	_tmp1_ = gee_abstract_list_get ((GeeAbstractList*) _tmp0_, 0);
	_tmp2_ = (ElektroSimPoint*) _tmp1_;
	_tmp3_ = elektro_sim_point_get_x (_tmp2_);
	_tmp4_ = _tmp3_;
	_tmp5_ = _tmp4_;
	_elektro_sim_point_unref0 (_tmp2_);
	p1_x = _tmp5_;
	_tmp6_ = ((ElektroSimComponent*) self)->connections;
	_tmp7_ = gee_abstract_list_get ((GeeAbstractList*) _tmp6_, 0);
	_tmp8_ = (ElektroSimPoint*) _tmp7_;
	_tmp9_ = elektro_sim_point_get_y (_tmp8_);
	_tmp10_ = _tmp9_;
	_tmp11_ = _tmp10_;
	_elektro_sim_point_unref0 (_tmp8_);
	p1_y = _tmp11_;
	_tmp12_ = ((ElektroSimComponent*) self)->connections;
	_tmp13_ = gee_abstract_list_get ((GeeAbstractList*) _tmp12_, 1);
	_tmp14_ = (ElektroSimPoint*) _tmp13_;
	_tmp15_ = elektro_sim_point_get_x (_tmp14_);
	_tmp16_ = _tmp15_;
	_tmp17_ = _tmp16_;
	_elektro_sim_point_unref0 (_tmp14_);
	p2_x = _tmp17_;
	_tmp18_ = ((ElektroSimComponent*) self)->connections;
	_tmp19_ = gee_abstract_list_get ((GeeAbstractList*) _tmp18_, 1);
	_tmp20_ = (ElektroSimPoint*) _tmp19_;
	_tmp21_ = elektro_sim_point_get_y (_tmp20_);
	_tmp22_ = _tmp21_;
	_tmp23_ = _tmp22_;
	_elektro_sim_point_unref0 (_tmp20_);
	p2_y = _tmp23_;
	_tmp25_ = elektro_sim_component_get_orientation ((ElektroSimComponent*) self);
	_tmp26_ = _tmp25_;
	if (_tmp26_ == ELEKTRO_SIM_COMPONENT_ORIENTATION_RIGHT) {
		_tmp24_ = TRUE;
	} else {
		ElektroSimComponentOrientation _tmp27_ = 0;
		ElektroSimComponentOrientation _tmp28_ = 0;
		_tmp27_ = elektro_sim_component_get_orientation ((ElektroSimComponent*) self);
		_tmp28_ = _tmp27_;
		_tmp24_ = _tmp28_ == ELEKTRO_SIM_COMPONENT_ORIENTATION_LEFT;
	}
	if (_tmp24_) {
		gint _tmp29_ = 0;
		gint _tmp30_ = 0;
		cairo_t* _tmp34_ = NULL;
		cairo_t* _tmp35_ = NULL;
		gint _tmp36_ = 0;
		gint _tmp37_ = 0;
		cairo_t* _tmp38_ = NULL;
		gint _tmp39_ = 0;
		gint _tmp40_ = 0;
		cairo_t* _tmp41_ = NULL;
		gint _tmp42_ = 0;
		gint _tmp43_ = 0;
		gint _tmp44_ = 0;
		gint _tmp45_ = 0;
		gint _tmp46_ = 0;
		gint _tmp47_ = 0;
		gint _tmp48_ = 0;
		gint _tmp49_ = 0;
		gint _tmp50_ = 0;
		gint _tmp51_ = 0;
		cairo_t* _tmp52_ = NULL;
		gint _tmp53_ = 0;
		gint _tmp54_ = 0;
		cairo_t* _tmp55_ = NULL;
		gint _tmp56_ = 0;
		gint _tmp57_ = 0;
		cairo_t* _tmp58_ = NULL;
		cairo_t* _tmp59_ = NULL;
		cairo_t* _tmp60_ = NULL;
		cairo_t* _tmp61_ = NULL;
		gint _tmp62_ = 0;
		gint _tmp63_ = 0;
		cairo_t* _tmp64_ = NULL;
		gint _tmp65_ = 0;
		gint _tmp66_ = 0;
		gint _tmp67_ = 0;
		gint _tmp68_ = 0;
		gint _tmp69_ = 0;
		gint _tmp70_ = 0;
		cairo_t* _tmp71_ = NULL;
		const gchar* _tmp72_ = NULL;
		const gchar* _tmp73_ = NULL;
		cairo_t* _tmp74_ = NULL;
		cairo_t* _tmp75_ = NULL;
		gint _tmp76_ = 0;
		gint _tmp77_ = 0;
		_tmp29_ = p1_x;
		_tmp30_ = p2_x;
		if (_tmp29_ > _tmp30_) {
			gint temp = 0;
			gint _tmp31_ = 0;
			gint _tmp32_ = 0;
			gint _tmp33_ = 0;
			_tmp31_ = p2_x;
			temp = _tmp31_;
			_tmp32_ = p1_x;
			p2_x = _tmp32_;
			_tmp33_ = temp;
			p1_x = _tmp33_;
		}
		_tmp34_ = cr;
		cairo_new_path (_tmp34_);
		_tmp35_ = cr;
		_tmp36_ = p1_x;
		_tmp37_ = p1_y;
		cairo_move_to (_tmp35_, (gdouble) _tmp36_, (gdouble) _tmp37_);
		_tmp38_ = cr;
		_tmp39_ = elektro_sim_component_get_width ((ElektroSimComponent*) self);
		_tmp40_ = _tmp39_;
		cairo_rel_line_to (_tmp38_, (gdouble) (_tmp40_ / 5), (gdouble) 0);
		_tmp41_ = cr;
		_tmp42_ = p1_x;
		_tmp43_ = elektro_sim_component_get_width ((ElektroSimComponent*) self);
		_tmp44_ = _tmp43_;
		_tmp45_ = p1_y;
		_tmp46_ = elektro_sim_component_get_height ((ElektroSimComponent*) self);
		_tmp47_ = _tmp46_;
		_tmp48_ = elektro_sim_component_get_width ((ElektroSimComponent*) self);
		_tmp49_ = _tmp48_;
		_tmp50_ = elektro_sim_component_get_height ((ElektroSimComponent*) self);
		_tmp51_ = _tmp50_;
		cairo_rectangle (_tmp41_, (gdouble) (_tmp42_ + (_tmp44_ / 5)), (gdouble) (_tmp45_ - (_tmp47_ / 2)), (gdouble) ((_tmp49_ / 5) * 3), (gdouble) _tmp51_);
		_tmp52_ = cr;
		_tmp53_ = p2_x;
		_tmp54_ = p2_y;
		cairo_move_to (_tmp52_, (gdouble) _tmp53_, (gdouble) _tmp54_);
		_tmp55_ = cr;
		_tmp56_ = elektro_sim_component_get_width ((ElektroSimComponent*) self);
		_tmp57_ = _tmp56_;
		cairo_rel_line_to (_tmp55_, (gdouble) ((-_tmp57_) / 5), (gdouble) 0);
		_tmp58_ = cr;
		cairo_close_path (_tmp58_);
		_tmp59_ = cr;
		cairo_stroke (_tmp59_);
		_tmp60_ = cr;
		cairo_new_path (_tmp60_);
		_tmp61_ = cr;
		_tmp62_ = elektro_sim_component_get_height ((ElektroSimComponent*) self);
		_tmp63_ = _tmp62_;
		cairo_set_font_size (_tmp61_, _tmp63_ * 0.9);
		_tmp64_ = cr;
		_tmp65_ = p1_x;
		_tmp66_ = elektro_sim_component_get_width ((ElektroSimComponent*) self);
		_tmp67_ = _tmp66_;
		_tmp68_ = p1_y;
		_tmp69_ = elektro_sim_component_get_height ((ElektroSimComponent*) self);
		_tmp70_ = _tmp69_;
		cairo_move_to (_tmp64_, (gdouble) (_tmp65_ + (_tmp67_ / 3)), (gdouble) (_tmp68_ + (_tmp70_ / 3)));
		_tmp71_ = cr;
		_tmp72_ = gtk_widget_get_name ((GtkWidget*) self);
		_tmp73_ = _tmp72_;
		cairo_text_path (_tmp71_, _tmp73_);
		_tmp74_ = cr;
		cairo_close_path (_tmp74_);
		_tmp75_ = cr;
		cairo_fill (_tmp75_);
		_tmp76_ = p1_x;
		x = _tmp76_ + 100;
		_tmp77_ = p1_y;
		y = _tmp77_ - 120;
	} else {
		gint _tmp78_ = 0;
		gint _tmp79_ = 0;
		cairo_t* _tmp83_ = NULL;
		cairo_t* _tmp84_ = NULL;
		gint _tmp85_ = 0;
		gint _tmp86_ = 0;
		cairo_t* _tmp87_ = NULL;
		gint _tmp88_ = 0;
		gint _tmp89_ = 0;
		cairo_t* _tmp90_ = NULL;
		gint _tmp91_ = 0;
		gint _tmp92_ = 0;
		gint _tmp93_ = 0;
		gint _tmp94_ = 0;
		gint _tmp95_ = 0;
		gint _tmp96_ = 0;
		gint _tmp97_ = 0;
		gint _tmp98_ = 0;
		gint _tmp99_ = 0;
		gint _tmp100_ = 0;
		cairo_t* _tmp101_ = NULL;
		gint _tmp102_ = 0;
		gint _tmp103_ = 0;
		cairo_t* _tmp104_ = NULL;
		gint _tmp105_ = 0;
		gint _tmp106_ = 0;
		cairo_t* _tmp107_ = NULL;
		cairo_t* _tmp108_ = NULL;
		cairo_t* _tmp109_ = NULL;
		cairo_t* _tmp110_ = NULL;
		gint _tmp111_ = 0;
		gint _tmp112_ = 0;
		cairo_t* _tmp113_ = NULL;
		gint _tmp114_ = 0;
		gint _tmp115_ = 0;
		gint _tmp116_ = 0;
		gint _tmp117_ = 0;
		gint _tmp118_ = 0;
		gint _tmp119_ = 0;
		cairo_t* _tmp120_ = NULL;
		const gchar* _tmp121_ = NULL;
		const gchar* _tmp122_ = NULL;
		cairo_t* _tmp123_ = NULL;
		cairo_t* _tmp124_ = NULL;
		gint _tmp125_ = 0;
		gint _tmp126_ = 0;
		_tmp78_ = p1_y;
		_tmp79_ = p2_y;
		if (_tmp78_ > _tmp79_) {
			gint temp = 0;
			gint _tmp80_ = 0;
			gint _tmp81_ = 0;
			gint _tmp82_ = 0;
			_tmp80_ = p2_y;
			temp = _tmp80_;
			_tmp81_ = p1_y;
			p2_y = _tmp81_;
			_tmp82_ = temp;
			p1_y = _tmp82_;
		}
		_tmp83_ = cr;
		cairo_new_path (_tmp83_);
		_tmp84_ = cr;
		_tmp85_ = p1_x;
		_tmp86_ = p1_y;
		cairo_move_to (_tmp84_, (gdouble) _tmp85_, (gdouble) _tmp86_);
		_tmp87_ = cr;
		_tmp88_ = elektro_sim_component_get_width ((ElektroSimComponent*) self);
		_tmp89_ = _tmp88_;
		cairo_rel_line_to (_tmp87_, (gdouble) 0, (gdouble) (_tmp89_ / 5));
		_tmp90_ = cr;
		_tmp91_ = p1_x;
		_tmp92_ = elektro_sim_component_get_height ((ElektroSimComponent*) self);
		_tmp93_ = _tmp92_;
		_tmp94_ = p1_y;
		_tmp95_ = elektro_sim_component_get_width ((ElektroSimComponent*) self);
		_tmp96_ = _tmp95_;
		_tmp97_ = elektro_sim_component_get_height ((ElektroSimComponent*) self);
		_tmp98_ = _tmp97_;
		_tmp99_ = elektro_sim_component_get_width ((ElektroSimComponent*) self);
		_tmp100_ = _tmp99_;
		cairo_rectangle (_tmp90_, (gdouble) (_tmp91_ - (_tmp93_ / 2)), (gdouble) (_tmp94_ + (_tmp96_ / 5)), (gdouble) _tmp98_, (gdouble) ((_tmp100_ / 5) * 3));
		_tmp101_ = cr;
		_tmp102_ = p2_x;
		_tmp103_ = p2_y;
		cairo_move_to (_tmp101_, (gdouble) _tmp102_, (gdouble) _tmp103_);
		_tmp104_ = cr;
		_tmp105_ = elektro_sim_component_get_width ((ElektroSimComponent*) self);
		_tmp106_ = _tmp105_;
		cairo_rel_line_to (_tmp104_, (gdouble) 0, (gdouble) ((-_tmp106_) / 5));
		_tmp107_ = cr;
		cairo_close_path (_tmp107_);
		_tmp108_ = cr;
		cairo_stroke (_tmp108_);
		_tmp109_ = cr;
		cairo_new_path (_tmp109_);
		_tmp110_ = cr;
		_tmp111_ = elektro_sim_component_get_height ((ElektroSimComponent*) self);
		_tmp112_ = _tmp111_;
		cairo_set_font_size (_tmp110_, _tmp112_ * 0.8);
		_tmp113_ = cr;
		_tmp114_ = p1_x;
		_tmp115_ = elektro_sim_component_get_height ((ElektroSimComponent*) self);
		_tmp116_ = _tmp115_;
		_tmp117_ = p1_y;
		_tmp118_ = elektro_sim_component_get_width ((ElektroSimComponent*) self);
		_tmp119_ = _tmp118_;
		cairo_move_to (_tmp113_, (gdouble) (_tmp114_ - (_tmp116_ / 2)), (gdouble) (_tmp117_ + (_tmp119_ / 2)));
		_tmp120_ = cr;
		_tmp121_ = gtk_widget_get_name ((GtkWidget*) self);
		_tmp122_ = _tmp121_;
		cairo_text_path (_tmp120_, _tmp122_);
		_tmp123_ = cr;
		cairo_close_path (_tmp123_);
		_tmp124_ = cr;
		cairo_fill (_tmp124_);
		_tmp125_ = p1_y;
		y = _tmp125_ + 80;
		_tmp126_ = p1_x;
		x = _tmp126_ + 40;
	}
	_tmp127_ = cr;
	_tmp128_ = x;
	_tmp129_ = y;
	elektro_sim_component_draw_emoticon ((ElektroSimComponent*) self, _tmp127_, _tmp128_, _tmp129_);
}


static void elektro_sim_resistor_real_clear_counter (ElektroSimComponent* base) {
	ElektroSimResistor * self;
	self = (ElektroSimResistor*) base;
	elektro_sim_resistor_counter = 0;
}


static ElektroSimComponent* elektro_sim_resistor_real_clone (ElektroSimComponent* base) {
	ElektroSimResistor * self;
	ElektroSimComponent* result = NULL;
	const gchar* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	ElektroSimResistor* newc = NULL;
	ElektroSimParameter* _tmp2_ = NULL;
	ElektroSimParameter* _tmp3_ = NULL;
	gdouble _tmp4_ = 0.0;
	gdouble _tmp5_ = 0.0;
	ElektroSimParameter* _tmp6_ = NULL;
	ElektroSimParameter* _tmp7_ = NULL;
	gdouble _tmp8_ = 0.0;
	gdouble _tmp9_ = 0.0;
	ElektroSimResistor* _tmp10_ = NULL;
	ElektroSimResistor* _tmp11_ = NULL;
	ElektroSimParameter* _tmp12_ = NULL;
	ElektroSimParameter* _tmp13_ = NULL;
	gboolean _tmp14_ = FALSE;
	gint _tmp15_ = 0;
	ElektroSimResistor* _tmp16_ = NULL;
	gint _tmp17_ = 0;
	gchar* _tmp18_ = NULL;
	gchar* _tmp19_ = NULL;
	gchar* _tmp20_ = NULL;
	gchar* _tmp21_ = NULL;
	ElektroSimResistor* _tmp22_ = NULL;
	const gchar* _tmp23_ = NULL;
	const gchar* _tmp24_ = NULL;
	self = (ElektroSimResistor*) base;
	_tmp0_ = gtk_widget_get_name ((GtkWidget*) self);
	_tmp1_ = _tmp0_;
	g_print ("start cloning %s\n", _tmp1_);
	_tmp2_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "R");
	_tmp3_ = _tmp2_;
	_tmp4_ = elektro_sim_parameter_get_val (_tmp3_);
	_tmp5_ = _tmp4_;
	_tmp6_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "Max Power");
	_tmp7_ = _tmp6_;
	_tmp8_ = elektro_sim_parameter_get_val (_tmp7_);
	_tmp9_ = _tmp8_;
	_tmp10_ = elektro_sim_resistor_new (_tmp5_, _tmp9_);
	g_object_ref_sink (_tmp10_);
	_tmp11_ = _tmp10_;
	_g_object_unref0 (_tmp7_);
	_g_object_unref0 (_tmp3_);
	newc = _tmp11_;
	_tmp12_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "R");
	_tmp13_ = _tmp12_;
	_tmp14_ = _tmp13_ == NULL;
	_g_object_unref0 (_tmp13_);
	if (_tmp14_) {
		g_print ("error no parameter to copy from!");
	}
	_tmp15_ = elektro_sim_resistor_counter;
	elektro_sim_resistor_counter = _tmp15_ + 1;
	_tmp16_ = newc;
	_tmp17_ = elektro_sim_resistor_counter;
	_tmp18_ = g_strdup_printf ("%i", _tmp17_);
	_tmp19_ = _tmp18_;
	_tmp20_ = g_strconcat ("r", _tmp19_, NULL);
	_tmp21_ = _tmp20_;
	elektro_sim_component_set_name ((ElektroSimComponent*) _tmp16_, _tmp21_);
	_g_free0 (_tmp21_);
	_g_free0 (_tmp19_);
	_tmp22_ = newc;
	elektro_sim_component_set_componentType ((ElektroSimComponent*) _tmp22_, ELEKTRO_SIM_COMPONENT_COMPONENT_TYPE_COMPONENT);
	_tmp23_ = gtk_widget_get_name ((GtkWidget*) self);
	_tmp24_ = _tmp23_;
	g_print ("end cloning %s\n", _tmp24_);
	result = (ElektroSimComponent*) newc;
	return result;
}


static void elektro_sim_resistor_real_snap (ElektroSimComponent* base, gint range, gint x, gint y) {
	ElektroSimResistor * self;
	ElektroSimPoint* point = NULL;
	ElektroSimPoint* point2 = NULL;
	gint _tmp0_ = 0;
	gint _tmp1_ = 0;
	ElektroSimPoint* _tmp2_ = NULL;
	ElektroSimPoint* _tmp3_ = NULL;
	gint _tmp4_ = 0;
	ElektroSimPoint* _tmp5_ = NULL;
	GeeArrayList* _tmp6_ = NULL;
	ElektroSimPoint* _tmp7_ = NULL;
	ElektroSimPoint* _tmp8_ = NULL;
	ElektroSimComponentOrientation _tmp9_ = 0;
	ElektroSimComponentOrientation _tmp10_ = 0;
	ElektroSimComponentOrientation _tmp11_ = 0;
	ElektroSimPoint* _tmp63_ = NULL;
	gint _tmp64_ = 0;
	ElektroSimPoint* _tmp65_ = NULL;
	GeeArrayList* _tmp66_ = NULL;
	ElektroSimPoint* _tmp67_ = NULL;
	ElektroSimPoint* _tmp68_ = NULL;
	self = (ElektroSimResistor*) base;
	_tmp0_ = x;
	_tmp1_ = y;
	_tmp2_ = elektro_sim_point_new (_tmp0_, _tmp1_);
	_elektro_sim_point_unref0 (point);
	point = _tmp2_;
	_tmp3_ = point;
	_tmp4_ = range;
	_tmp5_ = elektro_sim_point_point_nearby (_tmp3_, _tmp4_);
	_elektro_sim_point_unref0 (point);
	point = _tmp5_;
	_tmp6_ = ((ElektroSimComponent*) self)->connections;
	_tmp7_ = point;
	gee_abstract_collection_add ((GeeAbstractCollection*) _tmp6_, _tmp7_);
	_tmp8_ = point;
	_tmp9_ = elektro_sim_point_connect_component (_tmp8_, (ElektroSimComponent*) self);
	elektro_sim_component_set_orientation ((ElektroSimComponent*) self, _tmp9_);
	_tmp10_ = elektro_sim_component_get_orientation ((ElektroSimComponent*) self);
	_tmp11_ = _tmp10_;
	if (_tmp11_ == ELEKTRO_SIM_COMPONENT_ORIENTATION_RIGHT) {
		ElektroSimPoint* _tmp12_ = NULL;
		gint _tmp13_ = 0;
		gint _tmp14_ = 0;
		gint _tmp15_ = 0;
		gint _tmp16_ = 0;
		ElektroSimPoint* _tmp17_ = NULL;
		gint _tmp18_ = 0;
		gint _tmp19_ = 0;
		ElektroSimPoint* _tmp20_ = NULL;
		_tmp12_ = point;
		_tmp13_ = elektro_sim_point_get_x (_tmp12_);
		_tmp14_ = _tmp13_;
		_tmp15_ = elektro_sim_component_get_width ((ElektroSimComponent*) self);
		_tmp16_ = _tmp15_;
		_tmp17_ = point;
		_tmp18_ = elektro_sim_point_get_y (_tmp17_);
		_tmp19_ = _tmp18_;
		_tmp20_ = elektro_sim_point_new (_tmp14_ + _tmp16_, _tmp19_);
		_elektro_sim_point_unref0 (point2);
		point2 = _tmp20_;
	} else {
		ElektroSimComponentOrientation _tmp21_ = 0;
		ElektroSimComponentOrientation _tmp22_ = 0;
		_tmp21_ = elektro_sim_component_get_orientation ((ElektroSimComponent*) self);
		_tmp22_ = _tmp21_;
		if (_tmp22_ == ELEKTRO_SIM_COMPONENT_ORIENTATION_LEFT) {
			ElektroSimPoint* _tmp23_ = NULL;
			gint _tmp24_ = 0;
			gint _tmp25_ = 0;
			gint _tmp26_ = 0;
			gint _tmp27_ = 0;
			ElektroSimPoint* _tmp28_ = NULL;
			gint _tmp29_ = 0;
			gint _tmp30_ = 0;
			ElektroSimPoint* _tmp31_ = NULL;
			_tmp23_ = point;
			_tmp24_ = elektro_sim_point_get_x (_tmp23_);
			_tmp25_ = _tmp24_;
			_tmp26_ = elektro_sim_component_get_width ((ElektroSimComponent*) self);
			_tmp27_ = _tmp26_;
			_tmp28_ = point;
			_tmp29_ = elektro_sim_point_get_y (_tmp28_);
			_tmp30_ = _tmp29_;
			_tmp31_ = elektro_sim_point_new (_tmp25_ - _tmp27_, _tmp30_);
			_elektro_sim_point_unref0 (point2);
			point2 = _tmp31_;
		} else {
			ElektroSimComponentOrientation _tmp32_ = 0;
			ElektroSimComponentOrientation _tmp33_ = 0;
			_tmp32_ = elektro_sim_component_get_orientation ((ElektroSimComponent*) self);
			_tmp33_ = _tmp32_;
			if (_tmp33_ == ELEKTRO_SIM_COMPONENT_ORIENTATION_UP) {
				ElektroSimPoint* _tmp34_ = NULL;
				gint _tmp35_ = 0;
				gint _tmp36_ = 0;
				ElektroSimPoint* _tmp37_ = NULL;
				gint _tmp38_ = 0;
				gint _tmp39_ = 0;
				gint _tmp40_ = 0;
				gint _tmp41_ = 0;
				ElektroSimPoint* _tmp42_ = NULL;
				_tmp34_ = point;
				_tmp35_ = elektro_sim_point_get_x (_tmp34_);
				_tmp36_ = _tmp35_;
				_tmp37_ = point;
				_tmp38_ = elektro_sim_point_get_y (_tmp37_);
				_tmp39_ = _tmp38_;
				_tmp40_ = elektro_sim_component_get_width ((ElektroSimComponent*) self);
				_tmp41_ = _tmp40_;
				_tmp42_ = elektro_sim_point_new (_tmp36_, _tmp39_ - _tmp41_);
				_elektro_sim_point_unref0 (point2);
				point2 = _tmp42_;
			} else {
				ElektroSimComponentOrientation _tmp43_ = 0;
				ElektroSimComponentOrientation _tmp44_ = 0;
				_tmp43_ = elektro_sim_component_get_orientation ((ElektroSimComponent*) self);
				_tmp44_ = _tmp43_;
				if (_tmp44_ == ELEKTRO_SIM_COMPONENT_ORIENTATION_DOWN) {
					ElektroSimPoint* _tmp45_ = NULL;
					gint _tmp46_ = 0;
					gint _tmp47_ = 0;
					ElektroSimPoint* _tmp48_ = NULL;
					gint _tmp49_ = 0;
					gint _tmp50_ = 0;
					gint _tmp51_ = 0;
					gint _tmp52_ = 0;
					ElektroSimPoint* _tmp53_ = NULL;
					_tmp45_ = point;
					_tmp46_ = elektro_sim_point_get_x (_tmp45_);
					_tmp47_ = _tmp46_;
					_tmp48_ = point;
					_tmp49_ = elektro_sim_point_get_y (_tmp48_);
					_tmp50_ = _tmp49_;
					_tmp51_ = elektro_sim_component_get_width ((ElektroSimComponent*) self);
					_tmp52_ = _tmp51_;
					_tmp53_ = elektro_sim_point_new (_tmp47_, _tmp50_ + _tmp52_);
					_elektro_sim_point_unref0 (point2);
					point2 = _tmp53_;
				} else {
					ElektroSimPoint* _tmp54_ = NULL;
					gint _tmp55_ = 0;
					gint _tmp56_ = 0;
					gint _tmp57_ = 0;
					gint _tmp58_ = 0;
					ElektroSimPoint* _tmp59_ = NULL;
					gint _tmp60_ = 0;
					gint _tmp61_ = 0;
					ElektroSimPoint* _tmp62_ = NULL;
					_tmp54_ = point;
					_tmp55_ = elektro_sim_point_get_x (_tmp54_);
					_tmp56_ = _tmp55_;
					_tmp57_ = elektro_sim_component_get_width ((ElektroSimComponent*) self);
					_tmp58_ = _tmp57_;
					_tmp59_ = point;
					_tmp60_ = elektro_sim_point_get_y (_tmp59_);
					_tmp61_ = _tmp60_;
					_tmp62_ = elektro_sim_point_new (_tmp56_ + _tmp58_, _tmp61_);
					_elektro_sim_point_unref0 (point2);
					point2 = _tmp62_;
				}
			}
		}
	}
	_tmp63_ = point2;
	_tmp64_ = range;
	_tmp65_ = elektro_sim_point_point_nearby (_tmp63_, _tmp64_);
	_elektro_sim_point_unref0 (point2);
	point2 = _tmp65_;
	_tmp66_ = ((ElektroSimComponent*) self)->connections;
	_tmp67_ = point2;
	gee_abstract_collection_add ((GeeAbstractCollection*) _tmp66_, _tmp67_);
	_tmp68_ = point2;
	elektro_sim_point_connect_component (_tmp68_, (ElektroSimComponent*) self);
	_elektro_sim_point_unref0 (point2);
	_elektro_sim_point_unref0 (point);
}


static gchar* double_to_string (gdouble self) {
	gchar* result = NULL;
	gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	gint _tmp1__length1 = 0;
	const gchar* _tmp2_ = NULL;
	gchar* _tmp3_ = NULL;
	gchar* _tmp4_ = NULL;
	_tmp0_ = g_new0 (gchar, G_ASCII_DTOSTR_BUF_SIZE);
	_tmp1_ = _tmp0_;
	_tmp1__length1 = G_ASCII_DTOSTR_BUF_SIZE;
	_tmp2_ = g_ascii_dtostr (_tmp1_, G_ASCII_DTOSTR_BUF_SIZE, self);
	_tmp3_ = g_strdup (_tmp2_);
	_tmp4_ = _tmp3_;
	_tmp1_ = (g_free (_tmp1_), NULL);
	result = _tmp4_;
	return result;
}


static gchar* elektro_sim_resistor_real_get_netlist_line (ElektroSimComponent* base) {
	ElektroSimResistor * self;
	gchar* result = NULL;
	gchar* line = NULL;
	const gchar* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	gchar* _tmp2_ = NULL;
	gchar* _tmp3_ = NULL;
	GeeArrayList* _tmp4_ = NULL;
	gpointer _tmp5_ = NULL;
	ElektroSimPoint* _tmp6_ = NULL;
	gint _tmp7_ = 0;
	gint _tmp8_ = 0;
	gchar* _tmp9_ = NULL;
	gchar* _tmp10_ = NULL;
	gchar* _tmp11_ = NULL;
	gchar* _tmp12_ = NULL;
	gchar* _tmp13_ = NULL;
	gchar* _tmp14_ = NULL;
	GeeArrayList* _tmp15_ = NULL;
	gpointer _tmp16_ = NULL;
	ElektroSimPoint* _tmp17_ = NULL;
	gint _tmp18_ = 0;
	gint _tmp19_ = 0;
	gchar* _tmp20_ = NULL;
	gchar* _tmp21_ = NULL;
	gchar* _tmp22_ = NULL;
	gchar* _tmp23_ = NULL;
	gchar* _tmp24_ = NULL;
	gchar* _tmp25_ = NULL;
	ElektroSimParameter* _tmp26_ = NULL;
	ElektroSimParameter* _tmp27_ = NULL;
	gdouble _tmp28_ = 0.0;
	gdouble _tmp29_ = 0.0;
	gchar* _tmp30_ = NULL;
	gchar* _tmp31_ = NULL;
	gchar* _tmp32_ = NULL;
	gchar* _tmp33_ = NULL;
	gchar* _tmp34_ = NULL;
	gchar* _tmp35_ = NULL;
	ElektroSimParameter* _tmp36_ = NULL;
	ElektroSimParameter* _tmp37_ = NULL;
	gdouble _tmp38_ = 0.0;
	gdouble _tmp39_ = 0.0;
	gchar* _tmp40_ = NULL;
	gchar* _tmp41_ = NULL;
	gchar* _tmp42_ = NULL;
	gchar* _tmp43_ = NULL;
	gchar* _tmp44_ = NULL;
	self = (ElektroSimResistor*) base;
	_tmp0_ = gtk_widget_get_name ((GtkWidget*) self);
	_tmp1_ = _tmp0_;
	_tmp2_ = g_strconcat (_tmp1_, " ", NULL);
	_tmp3_ = _tmp2_;
	_tmp4_ = ((ElektroSimComponent*) self)->connections;
	_tmp5_ = gee_abstract_list_get ((GeeAbstractList*) _tmp4_, 0);
	_tmp6_ = (ElektroSimPoint*) _tmp5_;
	_tmp7_ = elektro_sim_point_get_net (_tmp6_);
	_tmp8_ = _tmp7_;
	_tmp9_ = g_strdup_printf ("%i", _tmp8_);
	_tmp10_ = _tmp9_;
	_tmp11_ = g_strconcat (_tmp3_, _tmp10_, NULL);
	_tmp12_ = _tmp11_;
	_tmp13_ = g_strconcat (_tmp12_, " ", NULL);
	_tmp14_ = _tmp13_;
	_tmp15_ = ((ElektroSimComponent*) self)->connections;
	_tmp16_ = gee_abstract_list_get ((GeeAbstractList*) _tmp15_, 1);
	_tmp17_ = (ElektroSimPoint*) _tmp16_;
	_tmp18_ = elektro_sim_point_get_net (_tmp17_);
	_tmp19_ = _tmp18_;
	_tmp20_ = g_strdup_printf ("%i", _tmp19_);
	_tmp21_ = _tmp20_;
	_tmp22_ = g_strconcat (_tmp14_, _tmp21_, NULL);
	_tmp23_ = _tmp22_;
	_tmp24_ = g_strconcat (_tmp23_, " ", NULL);
	_tmp25_ = _tmp24_;
	_tmp26_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "R");
	_tmp27_ = _tmp26_;
	_tmp28_ = elektro_sim_parameter_get_val (_tmp27_);
	_tmp29_ = _tmp28_;
	_tmp30_ = double_to_string (_tmp29_);
	_tmp31_ = _tmp30_;
	_tmp32_ = g_strconcat (_tmp25_, _tmp31_, NULL);
	_tmp33_ = _tmp32_;
	_tmp34_ = g_strconcat (_tmp33_, " max_power=", NULL);
	_tmp35_ = _tmp34_;
	_tmp36_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "Max Power");
	_tmp37_ = _tmp36_;
	_tmp38_ = elektro_sim_parameter_get_val (_tmp37_);
	_tmp39_ = _tmp38_;
	_tmp40_ = double_to_string (_tmp39_);
	_tmp41_ = _tmp40_;
	_tmp42_ = g_strconcat (_tmp35_, _tmp41_, NULL);
	_tmp43_ = _tmp42_;
	_tmp44_ = g_strconcat (_tmp43_, "\n", NULL);
	_g_free0 (line);
	line = _tmp44_;
	_g_free0 (_tmp43_);
	_g_free0 (_tmp41_);
	_g_object_unref0 (_tmp37_);
	_g_free0 (_tmp35_);
	_g_free0 (_tmp33_);
	_g_free0 (_tmp31_);
	_g_object_unref0 (_tmp27_);
	_g_free0 (_tmp25_);
	_g_free0 (_tmp23_);
	_g_free0 (_tmp21_);
	_elektro_sim_point_unref0 (_tmp17_);
	_g_free0 (_tmp14_);
	_g_free0 (_tmp12_);
	_g_free0 (_tmp10_);
	_elektro_sim_point_unref0 (_tmp6_);
	_g_free0 (_tmp3_);
	result = line;
	return result;
}


static void elektro_sim_resistor_class_init (ElektroSimResistorClass * klass) {
	elektro_sim_resistor_parent_class = g_type_class_peek_parent (klass);
	ELEKTRO_SIM_COMPONENT_CLASS (klass)->draw_image = elektro_sim_resistor_real_draw_image;
	ELEKTRO_SIM_COMPONENT_CLASS (klass)->clear_counter = elektro_sim_resistor_real_clear_counter;
	ELEKTRO_SIM_COMPONENT_CLASS (klass)->clone = elektro_sim_resistor_real_clone;
	ELEKTRO_SIM_COMPONENT_CLASS (klass)->snap = elektro_sim_resistor_real_snap;
	ELEKTRO_SIM_COMPONENT_CLASS (klass)->get_netlist_line = elektro_sim_resistor_real_get_netlist_line;
	G_OBJECT_CLASS (klass)->finalize = elektro_sim_resistor_finalize;
}


static void elektro_sim_resistor_instance_init (ElektroSimResistor * self) {
}


static void elektro_sim_resistor_finalize (GObject* obj) {
	ElektroSimResistor * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, ELEKTRO_SIM_TYPE_RESISTOR, ElektroSimResistor);
	G_OBJECT_CLASS (elektro_sim_resistor_parent_class)->finalize (obj);
}


GType elektro_sim_resistor_get_type (void) {
	static volatile gsize elektro_sim_resistor_type_id__volatile = 0;
	if (g_once_init_enter (&elektro_sim_resistor_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (ElektroSimResistorClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) elektro_sim_resistor_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (ElektroSimResistor), 0, (GInstanceInitFunc) elektro_sim_resistor_instance_init, NULL };
		GType elektro_sim_resistor_type_id;
		elektro_sim_resistor_type_id = g_type_register_static (ELEKTRO_SIM_TYPE_COMPONENT, "ElektroSimResistor", &g_define_type_info, 0);
		g_once_init_leave (&elektro_sim_resistor_type_id__volatile, elektro_sim_resistor_type_id);
	}
	return elektro_sim_resistor_type_id__volatile;
}



