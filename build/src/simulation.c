/* simulation.c generated by valac 0.24.0, the Vala compiler
 * generated from simulation.vala, do not modify */

/* -*- Mode: vala; indent-tabs-mode: t; c-basic-offset: 4; tab-width: 4 -*-  */
/*
 * simulation.vala
 * Copyright (C) 2014 Steven Vanden Branden <Stevenvandenbrandenstift@gmail.com>
 *
 * ElektroSim is free software: you can redistribute it and/or modify it
 * under the terms of the GNU General Public License as published by the
 * Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * ElektroSim is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License along
 * with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <cairo.h>
#include <stdlib.h>
#include <string.h>
#include <gee.h>
#include <float.h>
#include <math.h>


#define ELEKTRO_SIM_TYPE_COMPONENT (elektro_sim_component_get_type ())
#define ELEKTRO_SIM_COMPONENT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), ELEKTRO_SIM_TYPE_COMPONENT, ElektroSimComponent))
#define ELEKTRO_SIM_COMPONENT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), ELEKTRO_SIM_TYPE_COMPONENT, ElektroSimComponentClass))
#define ELEKTRO_SIM_IS_COMPONENT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), ELEKTRO_SIM_TYPE_COMPONENT))
#define ELEKTRO_SIM_IS_COMPONENT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), ELEKTRO_SIM_TYPE_COMPONENT))
#define ELEKTRO_SIM_COMPONENT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), ELEKTRO_SIM_TYPE_COMPONENT, ElektroSimComponentClass))

typedef struct _ElektroSimComponent ElektroSimComponent;
typedef struct _ElektroSimComponentClass ElektroSimComponentClass;
typedef struct _ElektroSimComponentPrivate ElektroSimComponentPrivate;

#define ELEKTRO_SIM_TYPE_PARAMETER (elektro_sim_parameter_get_type ())
#define ELEKTRO_SIM_PARAMETER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), ELEKTRO_SIM_TYPE_PARAMETER, ElektroSimParameter))
#define ELEKTRO_SIM_PARAMETER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), ELEKTRO_SIM_TYPE_PARAMETER, ElektroSimParameterClass))
#define ELEKTRO_SIM_IS_PARAMETER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), ELEKTRO_SIM_TYPE_PARAMETER))
#define ELEKTRO_SIM_IS_PARAMETER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), ELEKTRO_SIM_TYPE_PARAMETER))
#define ELEKTRO_SIM_PARAMETER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), ELEKTRO_SIM_TYPE_PARAMETER, ElektroSimParameterClass))

typedef struct _ElektroSimParameter ElektroSimParameter;
typedef struct _ElektroSimParameterClass ElektroSimParameterClass;

#define ELEKTRO_SIM_TYPE_POINT (elektro_sim_point_get_type ())
#define ELEKTRO_SIM_POINT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), ELEKTRO_SIM_TYPE_POINT, ElektroSimPoint))
#define ELEKTRO_SIM_POINT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), ELEKTRO_SIM_TYPE_POINT, ElektroSimPointClass))
#define ELEKTRO_SIM_IS_POINT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), ELEKTRO_SIM_TYPE_POINT))
#define ELEKTRO_SIM_IS_POINT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), ELEKTRO_SIM_TYPE_POINT))
#define ELEKTRO_SIM_POINT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), ELEKTRO_SIM_TYPE_POINT, ElektroSimPointClass))

typedef struct _ElektroSimPoint ElektroSimPoint;
typedef struct _ElektroSimPointClass ElektroSimPointClass;

#define ELEKTRO_SIM_TYPE_SIMULATION (elektro_sim_simulation_get_type ())
#define ELEKTRO_SIM_SIMULATION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), ELEKTRO_SIM_TYPE_SIMULATION, ElektroSimSimulation))
#define ELEKTRO_SIM_SIMULATION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), ELEKTRO_SIM_TYPE_SIMULATION, ElektroSimSimulationClass))
#define ELEKTRO_SIM_IS_SIMULATION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), ELEKTRO_SIM_TYPE_SIMULATION))
#define ELEKTRO_SIM_IS_SIMULATION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), ELEKTRO_SIM_TYPE_SIMULATION))
#define ELEKTRO_SIM_SIMULATION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), ELEKTRO_SIM_TYPE_SIMULATION, ElektroSimSimulationClass))

typedef struct _ElektroSimSimulation ElektroSimSimulation;
typedef struct _ElektroSimSimulationClass ElektroSimSimulationClass;
typedef struct _ElektroSimSimulationPrivate ElektroSimSimulationPrivate;

#define ELEKTRO_SIM_SIMULATION_TYPE_TYPE (elektro_sim_simulation_type_get_type ())

#define ELEKTRO_SIM_SIMULATION_TYPE_AC_VARIATION (elektro_sim_simulation_ac_variation_get_type ())

#define ELEKTRO_SIM_SIMULATION_TYPE_NUMBER_OF_SOURCES (elektro_sim_simulation_number_of_sources_get_type ())
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

#define ELEKTRO_SIM_PARAMETER_TYPE_WIDGET_STYLE (elektro_sim_parameter_widget_style_get_type ())

#define ELEKTRO_SIM_COMPONENT_TYPE_COMPONENT_TYPE (elektro_sim_component_component_type_get_type ())

#define ELEKTRO_SIM_COMPONENT_LIST_TYPE_MODE (elektro_sim_component_list_mode_get_type ())
#define _g_free0(var) (var = (g_free (var), NULL))

struct _ElektroSimComponent {
	GtkListBoxRow parent_instance;
	ElektroSimComponentPrivate * priv;
	GeeArrayList* parameters;
	GeeArrayList* connections;
	cairo_surface_t* image_surface;
	cairo_t* image_context;
	cairo_surface_t* emoticon_surface;
	cairo_t* emoticon_context;
};

struct _ElektroSimComponentClass {
	GtkListBoxRowClass parent_class;
	ElektroSimComponent* (*clone) (ElektroSimComponent* self);
	void (*snap) (ElektroSimComponent* self, gint range, gint x, gint y);
	void (*draw_image) (ElektroSimComponent* self, cairo_t* cr);
	void (*clear_counter) (ElektroSimComponent* self);
	gchar* (*get_netlist_line) (ElektroSimComponent* self);
};

struct _ElektroSimSimulation {
	ElektroSimComponent parent_instance;
	ElektroSimSimulationPrivate * priv;
};

struct _ElektroSimSimulationClass {
	ElektroSimComponentClass parent_class;
};

struct _ElektroSimSimulationPrivate {
	GeeArrayList* optionsAdded;
	GeeArrayList* dcOptionsAdded;
};

typedef enum  {
	ELEKTRO_SIM_SIMULATION_TYPE_OP,
	ELEKTRO_SIM_SIMULATION_TYPE_TRAN,
	ELEKTRO_SIM_SIMULATION_TYPE_AC,
	ELEKTRO_SIM_SIMULATION_TYPE_DC
} ElektroSimSimulationType;

typedef enum  {
	ELEKTRO_SIM_SIMULATION_AC_VARIATION_DECADE,
	ELEKTRO_SIM_SIMULATION_AC_VARIATION_OCTAVE,
	ELEKTRO_SIM_SIMULATION_AC_VARIATION_LINEAIR
} ElektroSimSimulationAcVariation;

typedef enum  {
	ELEKTRO_SIM_SIMULATION_NUMBER_OF_SOURCES_ONE,
	ELEKTRO_SIM_SIMULATION_NUMBER_OF_SOURCES_TWO
} ElektroSimSimulationNumberOfSources;

typedef enum  {
	ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_NONE,
	ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_LABEL,
	ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_ENTRY,
	ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_OPTIONS,
	ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER
} ElektroSimParameterWidgetStyle;

typedef void (*ElektroSimParameterOptionsMethod) (gint option, void* user_data);
typedef enum  {
	ELEKTRO_SIM_COMPONENT_COMPONENT_TYPE_COMPONENT,
	ELEKTRO_SIM_COMPONENT_COMPONENT_TYPE_TEMPLATE,
	ELEKTRO_SIM_COMPONENT_COMPONENT_TYPE_SIMULATION
} ElektroSimComponentComponentType;

typedef enum  {
	ELEKTRO_SIM_COMPONENT_LIST_MODE_UNKNOWN,
	ELEKTRO_SIM_COMPONENT_LIST_MODE_EDIT,
	ELEKTRO_SIM_COMPONENT_LIST_MODE_SIMULATION
} ElektroSimComponentListMode;


static gpointer elektro_sim_simulation_parent_class = NULL;

GType elektro_sim_component_get_type (void) G_GNUC_CONST;
GType elektro_sim_parameter_get_type (void) G_GNUC_CONST;
gpointer elektro_sim_point_ref (gpointer instance);
void elektro_sim_point_unref (gpointer instance);
GParamSpec* elektro_sim_param_spec_point (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void elektro_sim_value_set_point (GValue* value, gpointer v_object);
void elektro_sim_value_take_point (GValue* value, gpointer v_object);
gpointer elektro_sim_value_get_point (const GValue* value);
GType elektro_sim_point_get_type (void) G_GNUC_CONST;
GType elektro_sim_simulation_get_type (void) G_GNUC_CONST;
#define ELEKTRO_SIM_SIMULATION_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), ELEKTRO_SIM_TYPE_SIMULATION, ElektroSimSimulationPrivate))
enum  {
	ELEKTRO_SIM_SIMULATION_DUMMY_PROPERTY
};
GType elektro_sim_simulation_type_get_type (void) G_GNUC_CONST;
GType elektro_sim_simulation_ac_variation_get_type (void) G_GNUC_CONST;
GType elektro_sim_simulation_number_of_sources_get_type (void) G_GNUC_CONST;
ElektroSimSimulation* elektro_sim_simulation_new (gint option);
ElektroSimSimulation* elektro_sim_simulation_construct (GType object_type, gint option);
ElektroSimComponent* elektro_sim_component_construct (GType object_type, const gchar* name);
void elektro_sim_component_clear_parameters (ElektroSimComponent* self);
GType elektro_sim_parameter_widget_style_get_type (void) G_GNUC_CONST;
ElektroSimParameter* elektro_sim_component_add_parameter (ElektroSimComponent* self, const gchar* name, gdouble val, const gchar* unit, ElektroSimParameterWidgetStyle simulation, ElektroSimParameterWidgetStyle edit, GeeArrayList* options);
static void __lambda11_ (ElektroSimSimulation* self);
static void ___lambda11__elektro_sim_parameter_updated (ElektroSimParameter* _sender, gpointer self);
void elektro_sim_simulation_change_type (ElektroSimSimulation* self, gint option);
static void _elektro_sim_simulation_change_type_elektro_sim_parameter_options_method (gint option, gpointer self);
void elektro_sim_parameter_set_optionsMethod (ElektroSimParameter* self, ElektroSimParameterOptionsMethod value, gpointer value_target);
void elektro_sim_component_set_width (ElektroSimComponent* self, gint value);
void elektro_sim_component_set_height (ElektroSimComponent* self, gint value);
GType elektro_sim_component_component_type_get_type (void) G_GNUC_CONST;
void elektro_sim_component_set_componentType (ElektroSimComponent* self, ElektroSimComponentComponentType value);
static void elektro_sim_simulation_real_draw_image (ElektroSimComponent* base, cairo_t* cr);
void elektro_sim_simulation_reset_options (ElektroSimSimulation* self);
GtkBox* elektro_sim_component_get_grid (ElektroSimComponent* self);
void elektro_sim_simulation_reset_dc_options (ElektroSimSimulation* self);
void elektro_sim_simulation_change_dc_sources (ElektroSimSimulation* self, gint option);
ElektroSimParameter* elektro_sim_component_get_parameter (ElektroSimComponent* self, const gchar* name);
void elektro_sim_parameter_set_val (ElektroSimParameter* self, gdouble value);
GType elektro_sim_component_list_mode_get_type (void) G_GNUC_CONST;
void elektro_sim_component_set_mode (ElektroSimComponent* self, ElektroSimComponentListMode mode);
static void _elektro_sim_simulation_change_dc_sources_elektro_sim_parameter_options_method (gint option, gpointer self);
static ElektroSimComponent* elektro_sim_simulation_real_clone (ElektroSimComponent* base);
gdouble elektro_sim_parameter_get_val (ElektroSimParameter* self);
const gchar* elektro_sim_parameter_get_name (ElektroSimParameter* self);
static void elektro_sim_simulation_real_snap (ElektroSimComponent* base, gint range, gint x, gint y);
static gchar* elektro_sim_simulation_real_get_netlist_line (ElektroSimComponent* base);
static void elektro_sim_simulation_finalize (GObject* obj);


GType elektro_sim_simulation_type_get_type (void) {
	static volatile gsize elektro_sim_simulation_type_type_id__volatile = 0;
	if (g_once_init_enter (&elektro_sim_simulation_type_type_id__volatile)) {
		static const GEnumValue values[] = {{ELEKTRO_SIM_SIMULATION_TYPE_OP, "ELEKTRO_SIM_SIMULATION_TYPE_OP", "op"}, {ELEKTRO_SIM_SIMULATION_TYPE_TRAN, "ELEKTRO_SIM_SIMULATION_TYPE_TRAN", "tran"}, {ELEKTRO_SIM_SIMULATION_TYPE_AC, "ELEKTRO_SIM_SIMULATION_TYPE_AC", "ac"}, {ELEKTRO_SIM_SIMULATION_TYPE_DC, "ELEKTRO_SIM_SIMULATION_TYPE_DC", "dc"}, {0, NULL, NULL}};
		GType elektro_sim_simulation_type_type_id;
		elektro_sim_simulation_type_type_id = g_enum_register_static ("ElektroSimSimulationType", values);
		g_once_init_leave (&elektro_sim_simulation_type_type_id__volatile, elektro_sim_simulation_type_type_id);
	}
	return elektro_sim_simulation_type_type_id__volatile;
}


GType elektro_sim_simulation_ac_variation_get_type (void) {
	static volatile gsize elektro_sim_simulation_ac_variation_type_id__volatile = 0;
	if (g_once_init_enter (&elektro_sim_simulation_ac_variation_type_id__volatile)) {
		static const GEnumValue values[] = {{ELEKTRO_SIM_SIMULATION_AC_VARIATION_DECADE, "ELEKTRO_SIM_SIMULATION_AC_VARIATION_DECADE", "decade"}, {ELEKTRO_SIM_SIMULATION_AC_VARIATION_OCTAVE, "ELEKTRO_SIM_SIMULATION_AC_VARIATION_OCTAVE", "octave"}, {ELEKTRO_SIM_SIMULATION_AC_VARIATION_LINEAIR, "ELEKTRO_SIM_SIMULATION_AC_VARIATION_LINEAIR", "lineair"}, {0, NULL, NULL}};
		GType elektro_sim_simulation_ac_variation_type_id;
		elektro_sim_simulation_ac_variation_type_id = g_enum_register_static ("ElektroSimSimulationAcVariation", values);
		g_once_init_leave (&elektro_sim_simulation_ac_variation_type_id__volatile, elektro_sim_simulation_ac_variation_type_id);
	}
	return elektro_sim_simulation_ac_variation_type_id__volatile;
}


GType elektro_sim_simulation_number_of_sources_get_type (void) {
	static volatile gsize elektro_sim_simulation_number_of_sources_type_id__volatile = 0;
	if (g_once_init_enter (&elektro_sim_simulation_number_of_sources_type_id__volatile)) {
		static const GEnumValue values[] = {{ELEKTRO_SIM_SIMULATION_NUMBER_OF_SOURCES_ONE, "ELEKTRO_SIM_SIMULATION_NUMBER_OF_SOURCES_ONE", "one"}, {ELEKTRO_SIM_SIMULATION_NUMBER_OF_SOURCES_TWO, "ELEKTRO_SIM_SIMULATION_NUMBER_OF_SOURCES_TWO", "two"}, {0, NULL, NULL}};
		GType elektro_sim_simulation_number_of_sources_type_id;
		elektro_sim_simulation_number_of_sources_type_id = g_enum_register_static ("ElektroSimSimulationNumberOfSources", values);
		g_once_init_leave (&elektro_sim_simulation_number_of_sources_type_id__volatile, elektro_sim_simulation_number_of_sources_type_id);
	}
	return elektro_sim_simulation_number_of_sources_type_id__volatile;
}


static void __lambda11_ (ElektroSimSimulation* self) {
	g_signal_emit_by_name ((ElektroSimComponent*) self, "request-graph-redraw");
}


static void ___lambda11__elektro_sim_parameter_updated (ElektroSimParameter* _sender, gpointer self) {
	__lambda11_ ((ElektroSimSimulation*) self);
}


static void _elektro_sim_simulation_change_type_elektro_sim_parameter_options_method (gint option, gpointer self) {
	elektro_sim_simulation_change_type ((ElektroSimSimulation*) self, option);
}


ElektroSimSimulation* elektro_sim_simulation_construct (GType object_type, gint option) {
	ElektroSimSimulation * self = NULL;
	GeeArrayList* _tmp0_ = NULL;
	ElektroSimParameter* time = NULL;
	GeeArrayList* _tmp1_ = NULL;
	GeeArrayList* _tmp2_ = NULL;
	ElektroSimParameter* _tmp3_ = NULL;
	ElektroSimParameter* _tmp4_ = NULL;
	ElektroSimParameter* status = NULL;
	GeeArrayList* _tmp5_ = NULL;
	GeeArrayList* _tmp6_ = NULL;
	ElektroSimParameter* _tmp7_ = NULL;
	ElektroSimParameter* _tmp8_ = NULL;
	GeeArrayList* temp = NULL;
	GeeArrayList* _tmp9_ = NULL;
	ElektroSimParameter* type = NULL;
	gint _tmp10_ = 0;
	ElektroSimParameter* _tmp11_ = NULL;
	gint _tmp12_ = 0;
	GeeArrayList* _tmp13_ = NULL;
	GeeArrayList* _tmp14_ = NULL;
	self = (ElektroSimSimulation*) elektro_sim_component_construct (object_type, "Simulation");
	elektro_sim_component_clear_parameters ((ElektroSimComponent*) self);
	_tmp0_ = gee_array_list_new (ELEKTRO_SIM_TYPE_PARAMETER, (GBoxedCopyFunc) g_object_ref, g_object_unref, NULL, NULL, NULL);
	_g_object_unref0 (self->priv->optionsAdded);
	self->priv->optionsAdded = _tmp0_;
	_tmp1_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
	_tmp2_ = _tmp1_;
	_tmp3_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "time", (gdouble) 0, "s", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_NONE, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_NONE, _tmp2_);
	_tmp4_ = _tmp3_;
	_g_object_unref0 (_tmp2_);
	time = _tmp4_;
	_tmp5_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
	_tmp6_ = _tmp5_;
	_tmp7_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "status", (gdouble) 0, "", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_NONE, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_NONE, _tmp6_);
	_tmp8_ = _tmp7_;
	_g_object_unref0 (_tmp6_);
	status = _tmp8_;
	g_signal_connect_object (time, "updated", (GCallback) ___lambda11__elektro_sim_parameter_updated, self, 0);
	_tmp9_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
	temp = _tmp9_;
	gee_abstract_collection_add ((GeeAbstractCollection*) temp, "op");
	gee_abstract_collection_add ((GeeAbstractCollection*) temp, "transient");
	gee_abstract_collection_add ((GeeAbstractCollection*) temp, "ac");
	gee_abstract_collection_add ((GeeAbstractCollection*) temp, "dc sweep");
	_tmp10_ = option;
	_tmp11_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "type", (gdouble) _tmp10_, "", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_OPTIONS, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_OPTIONS, temp);
	type = _tmp11_;
	elektro_sim_parameter_set_optionsMethod (type, _elektro_sim_simulation_change_type_elektro_sim_parameter_options_method, self);
	_tmp12_ = option;
	elektro_sim_simulation_change_type (self, _tmp12_);
	elektro_sim_component_set_width ((ElektroSimComponent*) self, 100);
	elektro_sim_component_set_height ((ElektroSimComponent*) self, 50);
	elektro_sim_component_set_componentType ((ElektroSimComponent*) self, ELEKTRO_SIM_COMPONENT_COMPONENT_TYPE_SIMULATION);
	_tmp13_ = gee_array_list_new (ELEKTRO_SIM_TYPE_PARAMETER, (GBoxedCopyFunc) g_object_ref, g_object_unref, NULL, NULL, NULL);
	_g_object_unref0 (self->priv->optionsAdded);
	self->priv->optionsAdded = _tmp13_;
	_tmp14_ = gee_array_list_new (ELEKTRO_SIM_TYPE_PARAMETER, (GBoxedCopyFunc) g_object_ref, g_object_unref, NULL, NULL, NULL);
	_g_object_unref0 (self->priv->dcOptionsAdded);
	self->priv->dcOptionsAdded = _tmp14_;
	_g_object_unref0 (type);
	_g_object_unref0 (temp);
	_g_object_unref0 (status);
	_g_object_unref0 (time);
	return self;
}


ElektroSimSimulation* elektro_sim_simulation_new (gint option) {
	return elektro_sim_simulation_construct (ELEKTRO_SIM_TYPE_SIMULATION, option);
}


static void elektro_sim_simulation_real_draw_image (ElektroSimComponent* base, cairo_t* cr) {
	ElektroSimSimulation * self;
	self = (ElektroSimSimulation*) base;
	g_return_if_fail (cr != NULL);
}


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


void elektro_sim_simulation_reset_options (ElektroSimSimulation* self) {
	GeeArrayList* _tmp16_ = NULL;
	g_return_if_fail (self != NULL);
	{
		GeeArrayList* _par_list = NULL;
		GeeArrayList* _tmp0_ = NULL;
		GeeArrayList* _tmp1_ = NULL;
		gint _par_size = 0;
		GeeArrayList* _tmp2_ = NULL;
		gint _tmp3_ = 0;
		gint _tmp4_ = 0;
		gint _par_index = 0;
		_tmp0_ = self->priv->optionsAdded;
		_tmp1_ = _g_object_ref0 (_tmp0_);
		_par_list = _tmp1_;
		_tmp2_ = _par_list;
		_tmp3_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp2_);
		_tmp4_ = _tmp3_;
		_par_size = _tmp4_;
		_par_index = -1;
		while (TRUE) {
			gint _tmp5_ = 0;
			gint _tmp6_ = 0;
			gint _tmp7_ = 0;
			ElektroSimParameter* par = NULL;
			GeeArrayList* _tmp8_ = NULL;
			gint _tmp9_ = 0;
			gpointer _tmp10_ = NULL;
			GtkBox* _tmp11_ = NULL;
			GtkBox* _tmp12_ = NULL;
			ElektroSimParameter* _tmp13_ = NULL;
			GeeArrayList* _tmp14_ = NULL;
			ElektroSimParameter* _tmp15_ = NULL;
			_tmp5_ = _par_index;
			_par_index = _tmp5_ + 1;
			_tmp6_ = _par_index;
			_tmp7_ = _par_size;
			if (!(_tmp6_ < _tmp7_)) {
				break;
			}
			_tmp8_ = _par_list;
			_tmp9_ = _par_index;
			_tmp10_ = gee_abstract_list_get ((GeeAbstractList*) _tmp8_, _tmp9_);
			par = (ElektroSimParameter*) _tmp10_;
			_tmp11_ = elektro_sim_component_get_grid ((ElektroSimComponent*) self);
			_tmp12_ = _tmp11_;
			_tmp13_ = par;
			gtk_container_remove ((GtkContainer*) _tmp12_, G_TYPE_CHECK_INSTANCE_TYPE (_tmp13_, GTK_TYPE_WIDGET) ? ((GtkWidget*) _tmp13_) : NULL);
			_tmp14_ = ((ElektroSimComponent*) self)->parameters;
			_tmp15_ = par;
			gee_abstract_collection_remove ((GeeAbstractCollection*) _tmp14_, _tmp15_);
			_g_object_unref0 (par);
		}
		_g_object_unref0 (_par_list);
	}
	_tmp16_ = gee_array_list_new (ELEKTRO_SIM_TYPE_PARAMETER, (GBoxedCopyFunc) g_object_ref, g_object_unref, NULL, NULL, NULL);
	_g_object_unref0 (self->priv->optionsAdded);
	self->priv->optionsAdded = _tmp16_;
	elektro_sim_simulation_reset_dc_options (self);
}


void elektro_sim_simulation_reset_dc_options (ElektroSimSimulation* self) {
	GeeArrayList* _tmp16_ = NULL;
	g_return_if_fail (self != NULL);
	{
		GeeArrayList* _par_list = NULL;
		GeeArrayList* _tmp0_ = NULL;
		GeeArrayList* _tmp1_ = NULL;
		gint _par_size = 0;
		GeeArrayList* _tmp2_ = NULL;
		gint _tmp3_ = 0;
		gint _tmp4_ = 0;
		gint _par_index = 0;
		_tmp0_ = self->priv->dcOptionsAdded;
		_tmp1_ = _g_object_ref0 (_tmp0_);
		_par_list = _tmp1_;
		_tmp2_ = _par_list;
		_tmp3_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp2_);
		_tmp4_ = _tmp3_;
		_par_size = _tmp4_;
		_par_index = -1;
		while (TRUE) {
			gint _tmp5_ = 0;
			gint _tmp6_ = 0;
			gint _tmp7_ = 0;
			ElektroSimParameter* par = NULL;
			GeeArrayList* _tmp8_ = NULL;
			gint _tmp9_ = 0;
			gpointer _tmp10_ = NULL;
			GtkBox* _tmp11_ = NULL;
			GtkBox* _tmp12_ = NULL;
			ElektroSimParameter* _tmp13_ = NULL;
			GeeArrayList* _tmp14_ = NULL;
			ElektroSimParameter* _tmp15_ = NULL;
			_tmp5_ = _par_index;
			_par_index = _tmp5_ + 1;
			_tmp6_ = _par_index;
			_tmp7_ = _par_size;
			if (!(_tmp6_ < _tmp7_)) {
				break;
			}
			_tmp8_ = _par_list;
			_tmp9_ = _par_index;
			_tmp10_ = gee_abstract_list_get ((GeeAbstractList*) _tmp8_, _tmp9_);
			par = (ElektroSimParameter*) _tmp10_;
			_tmp11_ = elektro_sim_component_get_grid ((ElektroSimComponent*) self);
			_tmp12_ = _tmp11_;
			_tmp13_ = par;
			gtk_container_remove ((GtkContainer*) _tmp12_, G_TYPE_CHECK_INSTANCE_TYPE (_tmp13_, GTK_TYPE_WIDGET) ? ((GtkWidget*) _tmp13_) : NULL);
			_tmp14_ = ((ElektroSimComponent*) self)->parameters;
			_tmp15_ = par;
			gee_abstract_collection_remove ((GeeAbstractCollection*) _tmp14_, _tmp15_);
			_g_object_unref0 (par);
		}
		_g_object_unref0 (_par_list);
	}
	_tmp16_ = gee_array_list_new (ELEKTRO_SIM_TYPE_PARAMETER, (GBoxedCopyFunc) g_object_ref, g_object_unref, NULL, NULL, NULL);
	_g_object_unref0 (self->priv->dcOptionsAdded);
	self->priv->dcOptionsAdded = _tmp16_;
}


static gdouble double_parse (const gchar* str) {
	gdouble result = 0.0;
	const gchar* _tmp0_ = NULL;
	gdouble _tmp1_ = 0.0;
	g_return_val_if_fail (str != NULL, 0.0);
	_tmp0_ = str;
	_tmp1_ = g_ascii_strtod (_tmp0_, NULL);
	result = _tmp1_;
	return result;
}


void elektro_sim_simulation_change_dc_sources (ElektroSimSimulation* self, gint option) {
	gint _tmp0_ = 0;
	ElektroSimParameter* _tmp1_ = NULL;
	ElektroSimParameter* _tmp2_ = NULL;
	gint _tmp3_ = 0;
	gint _tmp4_ = 0;
	g_return_if_fail (self != NULL);
	_tmp0_ = option;
	g_print ("change to subtype '%i'\n", _tmp0_);
	elektro_sim_simulation_reset_dc_options (self);
	_tmp1_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "# sources");
	_tmp2_ = _tmp1_;
	_tmp3_ = option;
	elektro_sim_parameter_set_val (_tmp2_, (gdouble) _tmp3_);
	_g_object_unref0 (_tmp2_);
	_tmp4_ = option;
	switch (_tmp4_) {
		case ELEKTRO_SIM_SIMULATION_NUMBER_OF_SOURCES_ONE:
		{
			break;
		}
		case ELEKTRO_SIM_SIMULATION_NUMBER_OF_SOURCES_TWO:
		{
			ElektroSimParameter* source2 = NULL;
			GeeArrayList* _tmp5_ = NULL;
			GeeArrayList* _tmp6_ = NULL;
			ElektroSimParameter* _tmp7_ = NULL;
			ElektroSimParameter* _tmp8_ = NULL;
			ElektroSimParameter* start2 = NULL;
			gdouble _tmp9_ = 0.0;
			GeeArrayList* _tmp10_ = NULL;
			GeeArrayList* _tmp11_ = NULL;
			ElektroSimParameter* _tmp12_ = NULL;
			ElektroSimParameter* _tmp13_ = NULL;
			ElektroSimParameter* stop2 = NULL;
			GeeArrayList* _tmp14_ = NULL;
			GeeArrayList* _tmp15_ = NULL;
			ElektroSimParameter* _tmp16_ = NULL;
			ElektroSimParameter* _tmp17_ = NULL;
			ElektroSimParameter* step2 = NULL;
			gdouble _tmp18_ = 0.0;
			GeeArrayList* _tmp19_ = NULL;
			GeeArrayList* _tmp20_ = NULL;
			ElektroSimParameter* _tmp21_ = NULL;
			ElektroSimParameter* _tmp22_ = NULL;
			GeeArrayList* _tmp23_ = NULL;
			ElektroSimParameter* _tmp24_ = NULL;
			GeeArrayList* _tmp25_ = NULL;
			ElektroSimParameter* _tmp26_ = NULL;
			GeeArrayList* _tmp27_ = NULL;
			ElektroSimParameter* _tmp28_ = NULL;
			GeeArrayList* _tmp29_ = NULL;
			ElektroSimParameter* _tmp30_ = NULL;
			_tmp5_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
			_tmp6_ = _tmp5_;
			_tmp7_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "power source 2", (gdouble) 2, "", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_ENTRY, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_ENTRY, _tmp6_);
			_tmp8_ = _tmp7_;
			_g_object_unref0 (_tmp6_);
			source2 = _tmp8_;
			_tmp9_ = double_parse ("250e-3");
			_tmp10_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
			_tmp11_ = _tmp10_;
			_tmp12_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "start 2", _tmp9_, "s", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, _tmp11_);
			_tmp13_ = _tmp12_;
			_g_object_unref0 (_tmp11_);
			start2 = _tmp13_;
			_tmp14_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
			_tmp15_ = _tmp14_;
			_tmp16_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "stop 2", (gdouble) 5, "s", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, _tmp15_);
			_tmp17_ = _tmp16_;
			_g_object_unref0 (_tmp15_);
			stop2 = _tmp17_;
			_tmp18_ = double_parse ("250e-3");
			_tmp19_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
			_tmp20_ = _tmp19_;
			_tmp21_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "step 2", _tmp18_, "s", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, _tmp20_);
			_tmp22_ = _tmp21_;
			_g_object_unref0 (_tmp20_);
			step2 = _tmp22_;
			_tmp23_ = self->priv->dcOptionsAdded;
			_tmp24_ = source2;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp23_, _tmp24_);
			_tmp25_ = self->priv->dcOptionsAdded;
			_tmp26_ = start2;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp25_, _tmp26_);
			_tmp27_ = self->priv->dcOptionsAdded;
			_tmp28_ = stop2;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp27_, _tmp28_);
			_tmp29_ = self->priv->dcOptionsAdded;
			_tmp30_ = step2;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp29_, _tmp30_);
			_g_object_unref0 (step2);
			_g_object_unref0 (stop2);
			_g_object_unref0 (start2);
			_g_object_unref0 (source2);
			break;
		}
		default:
		break;
	}
	elektro_sim_component_set_mode ((ElektroSimComponent*) self, ELEKTRO_SIM_COMPONENT_LIST_MODE_EDIT);
	gtk_widget_show_all ((GtkWidget*) self);
}


static void _elektro_sim_simulation_change_dc_sources_elektro_sim_parameter_options_method (gint option, gpointer self) {
	elektro_sim_simulation_change_dc_sources ((ElektroSimSimulation*) self, option);
}


void elektro_sim_simulation_change_type (ElektroSimSimulation* self, gint option) {
	gint _tmp0_ = 0;
	ElektroSimParameter* _tmp1_ = NULL;
	ElektroSimParameter* _tmp2_ = NULL;
	gint _tmp3_ = 0;
	gint _tmp4_ = 0;
	g_return_if_fail (self != NULL);
	_tmp0_ = option;
	g_print ("change to type '%i'\n", _tmp0_);
	elektro_sim_simulation_reset_options (self);
	_tmp1_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "type");
	_tmp2_ = _tmp1_;
	_tmp3_ = option;
	elektro_sim_parameter_set_val (_tmp2_, (gdouble) _tmp3_);
	_g_object_unref0 (_tmp2_);
	_tmp4_ = option;
	switch (_tmp4_) {
		case ELEKTRO_SIM_SIMULATION_TYPE_TRAN:
		{
			ElektroSimParameter* step = NULL;
			gdouble _tmp5_ = 0.0;
			GeeArrayList* _tmp6_ = NULL;
			GeeArrayList* _tmp7_ = NULL;
			ElektroSimParameter* _tmp8_ = NULL;
			ElektroSimParameter* _tmp9_ = NULL;
			ElektroSimParameter* stop = NULL;
			GeeArrayList* _tmp10_ = NULL;
			GeeArrayList* _tmp11_ = NULL;
			ElektroSimParameter* _tmp12_ = NULL;
			ElektroSimParameter* _tmp13_ = NULL;
			ElektroSimParameter* start = NULL;
			GeeArrayList* _tmp14_ = NULL;
			GeeArrayList* _tmp15_ = NULL;
			ElektroSimParameter* _tmp16_ = NULL;
			ElektroSimParameter* _tmp17_ = NULL;
			GeeArrayList* _tmp18_ = NULL;
			ElektroSimParameter* _tmp19_ = NULL;
			GeeArrayList* _tmp20_ = NULL;
			ElektroSimParameter* _tmp21_ = NULL;
			GeeArrayList* _tmp22_ = NULL;
			ElektroSimParameter* _tmp23_ = NULL;
			_tmp5_ = double_parse ("200e-3");
			_tmp6_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
			_tmp7_ = _tmp6_;
			_tmp8_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "step", _tmp5_, "s", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, _tmp7_);
			_tmp9_ = _tmp8_;
			_g_object_unref0 (_tmp7_);
			step = _tmp9_;
			_tmp10_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
			_tmp11_ = _tmp10_;
			_tmp12_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "stop", (gdouble) 1, "s", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, _tmp11_);
			_tmp13_ = _tmp12_;
			_g_object_unref0 (_tmp11_);
			stop = _tmp13_;
			_tmp14_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
			_tmp15_ = _tmp14_;
			_tmp16_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "start", (gdouble) 0, "s", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, _tmp15_);
			_tmp17_ = _tmp16_;
			_g_object_unref0 (_tmp15_);
			start = _tmp17_;
			_tmp18_ = self->priv->optionsAdded;
			_tmp19_ = step;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp18_, _tmp19_);
			_tmp20_ = self->priv->optionsAdded;
			_tmp21_ = stop;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp20_, _tmp21_);
			_tmp22_ = self->priv->optionsAdded;
			_tmp23_ = start;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp22_, _tmp23_);
			_g_object_unref0 (start);
			_g_object_unref0 (stop);
			_g_object_unref0 (step);
			break;
		}
		case ELEKTRO_SIM_SIMULATION_TYPE_OP:
		{
			break;
		}
		case ELEKTRO_SIM_SIMULATION_TYPE_DC:
		{
			GeeArrayList* numberOfSources = NULL;
			GeeArrayList* _tmp24_ = NULL;
			GeeArrayList* _tmp25_ = NULL;
			GeeArrayList* _tmp26_ = NULL;
			ElektroSimParameter* amountSources = NULL;
			GeeArrayList* _tmp27_ = NULL;
			ElektroSimParameter* _tmp28_ = NULL;
			ElektroSimParameter* source = NULL;
			GeeArrayList* _tmp29_ = NULL;
			GeeArrayList* _tmp30_ = NULL;
			ElektroSimParameter* _tmp31_ = NULL;
			ElektroSimParameter* _tmp32_ = NULL;
			ElektroSimParameter* start = NULL;
			gdouble _tmp33_ = 0.0;
			GeeArrayList* _tmp34_ = NULL;
			GeeArrayList* _tmp35_ = NULL;
			ElektroSimParameter* _tmp36_ = NULL;
			ElektroSimParameter* _tmp37_ = NULL;
			ElektroSimParameter* stop = NULL;
			GeeArrayList* _tmp38_ = NULL;
			GeeArrayList* _tmp39_ = NULL;
			ElektroSimParameter* _tmp40_ = NULL;
			ElektroSimParameter* _tmp41_ = NULL;
			ElektroSimParameter* step = NULL;
			gdouble _tmp42_ = 0.0;
			GeeArrayList* _tmp43_ = NULL;
			GeeArrayList* _tmp44_ = NULL;
			ElektroSimParameter* _tmp45_ = NULL;
			ElektroSimParameter* _tmp46_ = NULL;
			GeeArrayList* _tmp47_ = NULL;
			ElektroSimParameter* _tmp48_ = NULL;
			GeeArrayList* _tmp49_ = NULL;
			ElektroSimParameter* _tmp50_ = NULL;
			GeeArrayList* _tmp51_ = NULL;
			ElektroSimParameter* _tmp52_ = NULL;
			GeeArrayList* _tmp53_ = NULL;
			ElektroSimParameter* _tmp54_ = NULL;
			GeeArrayList* _tmp55_ = NULL;
			ElektroSimParameter* _tmp56_ = NULL;
			ElektroSimParameter* _tmp57_ = NULL;
			_tmp24_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
			numberOfSources = _tmp24_;
			_tmp25_ = numberOfSources;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp25_, "1");
			_tmp26_ = numberOfSources;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp26_, "2");
			_tmp27_ = numberOfSources;
			_tmp28_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "# sources", (gdouble) 0, "", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_OPTIONS, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_OPTIONS, _tmp27_);
			amountSources = _tmp28_;
			_tmp29_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
			_tmp30_ = _tmp29_;
			_tmp31_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "power source", (gdouble) 1, "", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_ENTRY, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_ENTRY, _tmp30_);
			_tmp32_ = _tmp31_;
			_g_object_unref0 (_tmp30_);
			source = _tmp32_;
			_tmp33_ = double_parse ("250e-3");
			_tmp34_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
			_tmp35_ = _tmp34_;
			_tmp36_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "start", _tmp33_, "s", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, _tmp35_);
			_tmp37_ = _tmp36_;
			_g_object_unref0 (_tmp35_);
			start = _tmp37_;
			_tmp38_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
			_tmp39_ = _tmp38_;
			_tmp40_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "stop", (gdouble) 5, "s", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, _tmp39_);
			_tmp41_ = _tmp40_;
			_g_object_unref0 (_tmp39_);
			stop = _tmp41_;
			_tmp42_ = double_parse ("250e-3");
			_tmp43_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
			_tmp44_ = _tmp43_;
			_tmp45_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "step", _tmp42_, "s", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, _tmp44_);
			_tmp46_ = _tmp45_;
			_g_object_unref0 (_tmp44_);
			step = _tmp46_;
			_tmp47_ = self->priv->optionsAdded;
			_tmp48_ = amountSources;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp47_, _tmp48_);
			_tmp49_ = self->priv->optionsAdded;
			_tmp50_ = source;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp49_, _tmp50_);
			_tmp51_ = self->priv->optionsAdded;
			_tmp52_ = start;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp51_, _tmp52_);
			_tmp53_ = self->priv->optionsAdded;
			_tmp54_ = stop;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp53_, _tmp54_);
			_tmp55_ = self->priv->optionsAdded;
			_tmp56_ = step;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp55_, _tmp56_);
			_tmp57_ = amountSources;
			elektro_sim_parameter_set_optionsMethod (_tmp57_, _elektro_sim_simulation_change_dc_sources_elektro_sim_parameter_options_method, self);
			elektro_sim_simulation_change_dc_sources (self, (gint) ELEKTRO_SIM_SIMULATION_NUMBER_OF_SOURCES_ONE);
			_g_object_unref0 (step);
			_g_object_unref0 (stop);
			_g_object_unref0 (start);
			_g_object_unref0 (source);
			_g_object_unref0 (amountSources);
			_g_object_unref0 (numberOfSources);
			break;
		}
		case ELEKTRO_SIM_SIMULATION_TYPE_AC:
		{
			GeeArrayList* variations = NULL;
			GeeArrayList* _tmp58_ = NULL;
			GeeArrayList* _tmp59_ = NULL;
			GeeArrayList* _tmp60_ = NULL;
			GeeArrayList* _tmp61_ = NULL;
			ElektroSimParameter* variation = NULL;
			GeeArrayList* _tmp62_ = NULL;
			ElektroSimParameter* _tmp63_ = NULL;
			ElektroSimParameter* points = NULL;
			GeeArrayList* _tmp64_ = NULL;
			GeeArrayList* _tmp65_ = NULL;
			ElektroSimParameter* _tmp66_ = NULL;
			ElektroSimParameter* _tmp67_ = NULL;
			ElektroSimParameter* start = NULL;
			GeeArrayList* _tmp68_ = NULL;
			GeeArrayList* _tmp69_ = NULL;
			ElektroSimParameter* _tmp70_ = NULL;
			ElektroSimParameter* _tmp71_ = NULL;
			ElektroSimParameter* stop = NULL;
			GeeArrayList* _tmp72_ = NULL;
			GeeArrayList* _tmp73_ = NULL;
			ElektroSimParameter* _tmp74_ = NULL;
			ElektroSimParameter* _tmp75_ = NULL;
			GeeArrayList* _tmp76_ = NULL;
			ElektroSimParameter* _tmp77_ = NULL;
			GeeArrayList* _tmp78_ = NULL;
			ElektroSimParameter* _tmp79_ = NULL;
			GeeArrayList* _tmp80_ = NULL;
			ElektroSimParameter* _tmp81_ = NULL;
			GeeArrayList* _tmp82_ = NULL;
			ElektroSimParameter* _tmp83_ = NULL;
			_tmp58_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
			variations = _tmp58_;
			_tmp59_ = variations;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp59_, "decade");
			_tmp60_ = variations;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp60_, "octave");
			_tmp61_ = variations;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp61_, "lineair");
			_tmp62_ = variations;
			_tmp63_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "variation", (gdouble) 0, "", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_OPTIONS, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_OPTIONS, _tmp62_);
			variation = _tmp63_;
			_tmp64_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
			_tmp65_ = _tmp64_;
			_tmp66_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "points", (gdouble) 100, "", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, _tmp65_);
			_tmp67_ = _tmp66_;
			_g_object_unref0 (_tmp65_);
			points = _tmp67_;
			_tmp68_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
			_tmp69_ = _tmp68_;
			_tmp70_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "start frequency", (gdouble) 1, "Hz", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, _tmp69_);
			_tmp71_ = _tmp70_;
			_g_object_unref0 (_tmp69_);
			start = _tmp71_;
			_tmp72_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
			_tmp73_ = _tmp72_;
			_tmp74_ = elektro_sim_component_add_parameter ((ElektroSimComponent*) self, "stop frequency", (gdouble) 100, "Hz", ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, ELEKTRO_SIM_PARAMETER_WIDGET_STYLE_SLIDER, _tmp73_);
			_tmp75_ = _tmp74_;
			_g_object_unref0 (_tmp73_);
			stop = _tmp75_;
			_tmp76_ = self->priv->optionsAdded;
			_tmp77_ = variation;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp76_, _tmp77_);
			_tmp78_ = self->priv->optionsAdded;
			_tmp79_ = points;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp78_, _tmp79_);
			_tmp80_ = self->priv->optionsAdded;
			_tmp81_ = start;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp80_, _tmp81_);
			_tmp82_ = self->priv->optionsAdded;
			_tmp83_ = stop;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp82_, _tmp83_);
			_g_object_unref0 (stop);
			_g_object_unref0 (start);
			_g_object_unref0 (points);
			_g_object_unref0 (variation);
			_g_object_unref0 (variations);
			break;
		}
		default:
		break;
	}
	elektro_sim_component_set_mode ((ElektroSimComponent*) self, ELEKTRO_SIM_COMPONENT_LIST_MODE_EDIT);
	gtk_widget_show_all ((GtkWidget*) self);
}


static ElektroSimComponent* elektro_sim_simulation_real_clone (ElektroSimComponent* base) {
	ElektroSimSimulation * self;
	ElektroSimComponent* result = NULL;
	ElektroSimSimulation* newc = NULL;
	ElektroSimParameter* _tmp0_ = NULL;
	ElektroSimParameter* _tmp1_ = NULL;
	gdouble _tmp2_ = 0.0;
	gdouble _tmp3_ = 0.0;
	ElektroSimSimulation* _tmp4_ = NULL;
	ElektroSimSimulation* _tmp5_ = NULL;
	ElektroSimSimulation* _tmp26_ = NULL;
	self = (ElektroSimSimulation*) base;
	_tmp0_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "type");
	_tmp1_ = _tmp0_;
	_tmp2_ = elektro_sim_parameter_get_val (_tmp1_);
	_tmp3_ = _tmp2_;
	_tmp4_ = elektro_sim_simulation_new ((gint) _tmp3_);
	g_object_ref_sink (_tmp4_);
	_tmp5_ = _tmp4_;
	_g_object_unref0 (_tmp1_);
	newc = _tmp5_;
	{
		GeeArrayList* _par_list = NULL;
		GeeArrayList* _tmp6_ = NULL;
		GeeArrayList* _tmp7_ = NULL;
		gint _par_size = 0;
		GeeArrayList* _tmp8_ = NULL;
		gint _tmp9_ = 0;
		gint _tmp10_ = 0;
		gint _par_index = 0;
		_tmp6_ = ((ElektroSimComponent*) self)->parameters;
		_tmp7_ = _g_object_ref0 (_tmp6_);
		_par_list = _tmp7_;
		_tmp8_ = _par_list;
		_tmp9_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp8_);
		_tmp10_ = _tmp9_;
		_par_size = _tmp10_;
		_par_index = -1;
		while (TRUE) {
			gint _tmp11_ = 0;
			gint _tmp12_ = 0;
			gint _tmp13_ = 0;
			ElektroSimParameter* par = NULL;
			GeeArrayList* _tmp14_ = NULL;
			gint _tmp15_ = 0;
			gpointer _tmp16_ = NULL;
			ElektroSimSimulation* _tmp17_ = NULL;
			ElektroSimParameter* _tmp18_ = NULL;
			const gchar* _tmp19_ = NULL;
			const gchar* _tmp20_ = NULL;
			ElektroSimParameter* _tmp21_ = NULL;
			ElektroSimParameter* _tmp22_ = NULL;
			ElektroSimParameter* _tmp23_ = NULL;
			gdouble _tmp24_ = 0.0;
			gdouble _tmp25_ = 0.0;
			_tmp11_ = _par_index;
			_par_index = _tmp11_ + 1;
			_tmp12_ = _par_index;
			_tmp13_ = _par_size;
			if (!(_tmp12_ < _tmp13_)) {
				break;
			}
			_tmp14_ = _par_list;
			_tmp15_ = _par_index;
			_tmp16_ = gee_abstract_list_get ((GeeAbstractList*) _tmp14_, _tmp15_);
			par = (ElektroSimParameter*) _tmp16_;
			_tmp17_ = newc;
			_tmp18_ = par;
			_tmp19_ = elektro_sim_parameter_get_name (_tmp18_);
			_tmp20_ = _tmp19_;
			_tmp21_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) _tmp17_, _tmp20_);
			_tmp22_ = _tmp21_;
			_tmp23_ = par;
			_tmp24_ = elektro_sim_parameter_get_val (_tmp23_);
			_tmp25_ = _tmp24_;
			elektro_sim_parameter_set_val (_tmp22_, _tmp25_);
			_g_object_unref0 (_tmp22_);
			_g_object_unref0 (par);
		}
		_g_object_unref0 (_par_list);
	}
	_tmp26_ = newc;
	elektro_sim_component_set_componentType ((ElektroSimComponent*) _tmp26_, ELEKTRO_SIM_COMPONENT_COMPONENT_TYPE_SIMULATION);
	result = (ElektroSimComponent*) newc;
	return result;
}


static void elektro_sim_simulation_real_snap (ElektroSimComponent* base, gint range, gint x, gint y) {
	ElektroSimSimulation * self;
	self = (ElektroSimSimulation*) base;
}


static gchar* double_to_string (gdouble self) {
	gchar* result = NULL;
	gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	gint _tmp1__length1 = 0;
	const gchar* _tmp2_ = NULL;
	gchar* _tmp3_ = NULL;
	gchar* _tmp4_ = NULL;
	_tmp0_ = g_new0 (gchar, G_ASCII_DTOSTR_BUF_SIZE);
	_tmp1_ = _tmp0_;
	_tmp1__length1 = G_ASCII_DTOSTR_BUF_SIZE;
	_tmp2_ = g_ascii_dtostr (_tmp1_, G_ASCII_DTOSTR_BUF_SIZE, self);
	_tmp3_ = g_strdup (_tmp2_);
	_tmp4_ = _tmp3_;
	_tmp1_ = (g_free (_tmp1_), NULL);
	result = _tmp4_;
	return result;
}


static gchar* elektro_sim_simulation_real_get_netlist_line (ElektroSimComponent* base) {
	ElektroSimSimulation * self;
	gchar* result = NULL;
	gchar* line = NULL;
	gchar* _tmp0_ = NULL;
	ElektroSimParameter* _tmp1_ = NULL;
	ElektroSimParameter* _tmp2_ = NULL;
	gdouble _tmp3_ = 0.0;
	gdouble _tmp4_ = 0.0;
	gint _tmp5_ = 0;
	self = (ElektroSimSimulation*) base;
	_tmp0_ = g_strdup ("");
	_g_free0 (line);
	line = _tmp0_;
	_tmp1_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "type");
	_tmp2_ = _tmp1_;
	_tmp3_ = elektro_sim_parameter_get_val (_tmp2_);
	_tmp4_ = _tmp3_;
	_tmp5_ = (gint) _tmp4_;
	_g_object_unref0 (_tmp2_);
	switch (_tmp5_) {
		case ELEKTRO_SIM_SIMULATION_TYPE_TRAN:
		{
			const gchar* _tmp6_ = NULL;
			ElektroSimParameter* _tmp7_ = NULL;
			ElektroSimParameter* _tmp8_ = NULL;
			gdouble _tmp9_ = 0.0;
			gdouble _tmp10_ = 0.0;
			gchar* _tmp11_ = NULL;
			gchar* _tmp12_ = NULL;
			gchar* _tmp13_ = NULL;
			gchar* _tmp14_ = NULL;
			gchar* _tmp15_ = NULL;
			gchar* _tmp16_ = NULL;
			ElektroSimParameter* _tmp17_ = NULL;
			ElektroSimParameter* _tmp18_ = NULL;
			gdouble _tmp19_ = 0.0;
			gdouble _tmp20_ = 0.0;
			gchar* _tmp21_ = NULL;
			gchar* _tmp22_ = NULL;
			gchar* _tmp23_ = NULL;
			gchar* _tmp24_ = NULL;
			gchar* _tmp25_ = NULL;
			gchar* _tmp26_ = NULL;
			ElektroSimParameter* _tmp27_ = NULL;
			ElektroSimParameter* _tmp28_ = NULL;
			gdouble _tmp29_ = 0.0;
			gdouble _tmp30_ = 0.0;
			gchar* _tmp31_ = NULL;
			gchar* _tmp32_ = NULL;
			gchar* _tmp33_ = NULL;
			gchar* _tmp34_ = NULL;
			gchar* _tmp35_ = NULL;
			_tmp6_ = line;
			_tmp7_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "step");
			_tmp8_ = _tmp7_;
			_tmp9_ = elektro_sim_parameter_get_val (_tmp8_);
			_tmp10_ = _tmp9_;
			_tmp11_ = double_to_string (_tmp10_);
			_tmp12_ = _tmp11_;
			_tmp13_ = g_strconcat ("tran ", _tmp12_, NULL);
			_tmp14_ = _tmp13_;
			_tmp15_ = g_strconcat (_tmp14_, " ", NULL);
			_tmp16_ = _tmp15_;
			_tmp17_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "stop");
			_tmp18_ = _tmp17_;
			_tmp19_ = elektro_sim_parameter_get_val (_tmp18_);
			_tmp20_ = _tmp19_;
			_tmp21_ = double_to_string (_tmp20_);
			_tmp22_ = _tmp21_;
			_tmp23_ = g_strconcat (_tmp16_, _tmp22_, NULL);
			_tmp24_ = _tmp23_;
			_tmp25_ = g_strconcat (_tmp24_, " ", NULL);
			_tmp26_ = _tmp25_;
			_tmp27_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "start");
			_tmp28_ = _tmp27_;
			_tmp29_ = elektro_sim_parameter_get_val (_tmp28_);
			_tmp30_ = _tmp29_;
			_tmp31_ = double_to_string (_tmp30_);
			_tmp32_ = _tmp31_;
			_tmp33_ = g_strconcat (_tmp26_, _tmp32_, NULL);
			_tmp34_ = _tmp33_;
			_tmp35_ = g_strconcat (_tmp6_, _tmp34_, NULL);
			_g_free0 (line);
			line = _tmp35_;
			_g_free0 (_tmp34_);
			_g_free0 (_tmp32_);
			_g_object_unref0 (_tmp28_);
			_g_free0 (_tmp26_);
			_g_free0 (_tmp24_);
			_g_free0 (_tmp22_);
			_g_object_unref0 (_tmp18_);
			_g_free0 (_tmp16_);
			_g_free0 (_tmp14_);
			_g_free0 (_tmp12_);
			_g_object_unref0 (_tmp8_);
			break;
		}
		case ELEKTRO_SIM_SIMULATION_TYPE_OP:
		{
			const gchar* _tmp36_ = NULL;
			gchar* _tmp37_ = NULL;
			_tmp36_ = line;
			_tmp37_ = g_strconcat (_tmp36_, "op", NULL);
			_g_free0 (line);
			line = _tmp37_;
			break;
		}
		case ELEKTRO_SIM_SIMULATION_TYPE_DC:
		{
			const gchar* _tmp38_ = NULL;
			ElektroSimParameter* _tmp39_ = NULL;
			ElektroSimParameter* _tmp40_ = NULL;
			gdouble _tmp41_ = 0.0;
			gdouble _tmp42_ = 0.0;
			gchar* _tmp43_ = NULL;
			gchar* _tmp44_ = NULL;
			gchar* _tmp45_ = NULL;
			gchar* _tmp46_ = NULL;
			gchar* _tmp47_ = NULL;
			gchar* _tmp48_ = NULL;
			ElektroSimParameter* _tmp49_ = NULL;
			ElektroSimParameter* _tmp50_ = NULL;
			gdouble _tmp51_ = 0.0;
			gdouble _tmp52_ = 0.0;
			gchar* _tmp53_ = NULL;
			gchar* _tmp54_ = NULL;
			gchar* _tmp55_ = NULL;
			gchar* _tmp56_ = NULL;
			gchar* _tmp57_ = NULL;
			gchar* _tmp58_ = NULL;
			ElektroSimParameter* _tmp59_ = NULL;
			ElektroSimParameter* _tmp60_ = NULL;
			gdouble _tmp61_ = 0.0;
			gdouble _tmp62_ = 0.0;
			gchar* _tmp63_ = NULL;
			gchar* _tmp64_ = NULL;
			gchar* _tmp65_ = NULL;
			gchar* _tmp66_ = NULL;
			gchar* _tmp67_ = NULL;
			gchar* _tmp68_ = NULL;
			ElektroSimParameter* _tmp69_ = NULL;
			ElektroSimParameter* _tmp70_ = NULL;
			gdouble _tmp71_ = 0.0;
			gdouble _tmp72_ = 0.0;
			gchar* _tmp73_ = NULL;
			gchar* _tmp74_ = NULL;
			gchar* _tmp75_ = NULL;
			gchar* _tmp76_ = NULL;
			gchar* _tmp77_ = NULL;
			ElektroSimParameter* _tmp78_ = NULL;
			ElektroSimParameter* _tmp79_ = NULL;
			gdouble _tmp80_ = 0.0;
			gdouble _tmp81_ = 0.0;
			gboolean _tmp82_ = FALSE;
			_tmp38_ = line;
			_tmp39_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "power source");
			_tmp40_ = _tmp39_;
			_tmp41_ = elektro_sim_parameter_get_val (_tmp40_);
			_tmp42_ = _tmp41_;
			_tmp43_ = double_to_string (_tmp42_);
			_tmp44_ = _tmp43_;
			_tmp45_ = g_strconcat ("dc v", _tmp44_, NULL);
			_tmp46_ = _tmp45_;
			_tmp47_ = g_strconcat (_tmp46_, " ", NULL);
			_tmp48_ = _tmp47_;
			_tmp49_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "start");
			_tmp50_ = _tmp49_;
			_tmp51_ = elektro_sim_parameter_get_val (_tmp50_);
			_tmp52_ = _tmp51_;
			_tmp53_ = double_to_string (_tmp52_);
			_tmp54_ = _tmp53_;
			_tmp55_ = g_strconcat (_tmp48_, _tmp54_, NULL);
			_tmp56_ = _tmp55_;
			_tmp57_ = g_strconcat (_tmp56_, " ", NULL);
			_tmp58_ = _tmp57_;
			_tmp59_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "stop");
			_tmp60_ = _tmp59_;
			_tmp61_ = elektro_sim_parameter_get_val (_tmp60_);
			_tmp62_ = _tmp61_;
			_tmp63_ = double_to_string (_tmp62_);
			_tmp64_ = _tmp63_;
			_tmp65_ = g_strconcat (_tmp58_, _tmp64_, NULL);
			_tmp66_ = _tmp65_;
			_tmp67_ = g_strconcat (_tmp66_, " ", NULL);
			_tmp68_ = _tmp67_;
			_tmp69_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "step");
			_tmp70_ = _tmp69_;
			_tmp71_ = elektro_sim_parameter_get_val (_tmp70_);
			_tmp72_ = _tmp71_;
			_tmp73_ = double_to_string (_tmp72_);
			_tmp74_ = _tmp73_;
			_tmp75_ = g_strconcat (_tmp68_, _tmp74_, NULL);
			_tmp76_ = _tmp75_;
			_tmp77_ = g_strconcat (_tmp38_, _tmp76_, NULL);
			_g_free0 (line);
			line = _tmp77_;
			_g_free0 (_tmp76_);
			_g_free0 (_tmp74_);
			_g_object_unref0 (_tmp70_);
			_g_free0 (_tmp68_);
			_g_free0 (_tmp66_);
			_g_free0 (_tmp64_);
			_g_object_unref0 (_tmp60_);
			_g_free0 (_tmp58_);
			_g_free0 (_tmp56_);
			_g_free0 (_tmp54_);
			_g_object_unref0 (_tmp50_);
			_g_free0 (_tmp48_);
			_g_free0 (_tmp46_);
			_g_free0 (_tmp44_);
			_g_object_unref0 (_tmp40_);
			_tmp78_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "# sources");
			_tmp79_ = _tmp78_;
			_tmp80_ = elektro_sim_parameter_get_val (_tmp79_);
			_tmp81_ = _tmp80_;
			_tmp82_ = ((gint) _tmp81_) == ((gint) ELEKTRO_SIM_SIMULATION_NUMBER_OF_SOURCES_TWO);
			_g_object_unref0 (_tmp79_);
			if (_tmp82_) {
				const gchar* _tmp83_ = NULL;
				ElektroSimParameter* _tmp84_ = NULL;
				ElektroSimParameter* _tmp85_ = NULL;
				gdouble _tmp86_ = 0.0;
				gdouble _tmp87_ = 0.0;
				gchar* _tmp88_ = NULL;
				gchar* _tmp89_ = NULL;
				gchar* _tmp90_ = NULL;
				gchar* _tmp91_ = NULL;
				gchar* _tmp92_ = NULL;
				gchar* _tmp93_ = NULL;
				ElektroSimParameter* _tmp94_ = NULL;
				ElektroSimParameter* _tmp95_ = NULL;
				gdouble _tmp96_ = 0.0;
				gdouble _tmp97_ = 0.0;
				gchar* _tmp98_ = NULL;
				gchar* _tmp99_ = NULL;
				gchar* _tmp100_ = NULL;
				gchar* _tmp101_ = NULL;
				gchar* _tmp102_ = NULL;
				gchar* _tmp103_ = NULL;
				ElektroSimParameter* _tmp104_ = NULL;
				ElektroSimParameter* _tmp105_ = NULL;
				gdouble _tmp106_ = 0.0;
				gdouble _tmp107_ = 0.0;
				gchar* _tmp108_ = NULL;
				gchar* _tmp109_ = NULL;
				gchar* _tmp110_ = NULL;
				gchar* _tmp111_ = NULL;
				gchar* _tmp112_ = NULL;
				gchar* _tmp113_ = NULL;
				ElektroSimParameter* _tmp114_ = NULL;
				ElektroSimParameter* _tmp115_ = NULL;
				gdouble _tmp116_ = 0.0;
				gdouble _tmp117_ = 0.0;
				gchar* _tmp118_ = NULL;
				gchar* _tmp119_ = NULL;
				gchar* _tmp120_ = NULL;
				gchar* _tmp121_ = NULL;
				gchar* _tmp122_ = NULL;
				_tmp83_ = line;
				_tmp84_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "power source 2");
				_tmp85_ = _tmp84_;
				_tmp86_ = elektro_sim_parameter_get_val (_tmp85_);
				_tmp87_ = _tmp86_;
				_tmp88_ = double_to_string (_tmp87_);
				_tmp89_ = _tmp88_;
				_tmp90_ = g_strconcat (" ", _tmp89_, NULL);
				_tmp91_ = _tmp90_;
				_tmp92_ = g_strconcat (_tmp91_, " ", NULL);
				_tmp93_ = _tmp92_;
				_tmp94_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "start 2");
				_tmp95_ = _tmp94_;
				_tmp96_ = elektro_sim_parameter_get_val (_tmp95_);
				_tmp97_ = _tmp96_;
				_tmp98_ = double_to_string (_tmp97_);
				_tmp99_ = _tmp98_;
				_tmp100_ = g_strconcat (_tmp93_, _tmp99_, NULL);
				_tmp101_ = _tmp100_;
				_tmp102_ = g_strconcat (_tmp101_, " ", NULL);
				_tmp103_ = _tmp102_;
				_tmp104_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "stop 2");
				_tmp105_ = _tmp104_;
				_tmp106_ = elektro_sim_parameter_get_val (_tmp105_);
				_tmp107_ = _tmp106_;
				_tmp108_ = double_to_string (_tmp107_);
				_tmp109_ = _tmp108_;
				_tmp110_ = g_strconcat (_tmp103_, _tmp109_, NULL);
				_tmp111_ = _tmp110_;
				_tmp112_ = g_strconcat (_tmp111_, " ", NULL);
				_tmp113_ = _tmp112_;
				_tmp114_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "step 2");
				_tmp115_ = _tmp114_;
				_tmp116_ = elektro_sim_parameter_get_val (_tmp115_);
				_tmp117_ = _tmp116_;
				_tmp118_ = double_to_string (_tmp117_);
				_tmp119_ = _tmp118_;
				_tmp120_ = g_strconcat (_tmp113_, _tmp119_, NULL);
				_tmp121_ = _tmp120_;
				_tmp122_ = g_strconcat (_tmp83_, _tmp121_, NULL);
				_g_free0 (line);
				line = _tmp122_;
				_g_free0 (_tmp121_);
				_g_free0 (_tmp119_);
				_g_object_unref0 (_tmp115_);
				_g_free0 (_tmp113_);
				_g_free0 (_tmp111_);
				_g_free0 (_tmp109_);
				_g_object_unref0 (_tmp105_);
				_g_free0 (_tmp103_);
				_g_free0 (_tmp101_);
				_g_free0 (_tmp99_);
				_g_object_unref0 (_tmp95_);
				_g_free0 (_tmp93_);
				_g_free0 (_tmp91_);
				_g_free0 (_tmp89_);
				_g_object_unref0 (_tmp85_);
			}
			break;
		}
		case ELEKTRO_SIM_SIMULATION_TYPE_AC:
		{
			const gchar* _tmp123_ = NULL;
			gchar* _tmp124_ = NULL;
			ElektroSimParameter* _tmp125_ = NULL;
			ElektroSimParameter* _tmp126_ = NULL;
			gdouble _tmp127_ = 0.0;
			gdouble _tmp128_ = 0.0;
			gint _tmp129_ = 0;
			const gchar* _tmp136_ = NULL;
			ElektroSimParameter* _tmp137_ = NULL;
			ElektroSimParameter* _tmp138_ = NULL;
			gdouble _tmp139_ = 0.0;
			gdouble _tmp140_ = 0.0;
			gchar* _tmp141_ = NULL;
			gchar* _tmp142_ = NULL;
			gchar* _tmp143_ = NULL;
			gchar* _tmp144_ = NULL;
			ElektroSimParameter* _tmp145_ = NULL;
			ElektroSimParameter* _tmp146_ = NULL;
			gdouble _tmp147_ = 0.0;
			gdouble _tmp148_ = 0.0;
			gchar* _tmp149_ = NULL;
			gchar* _tmp150_ = NULL;
			gchar* _tmp151_ = NULL;
			gchar* _tmp152_ = NULL;
			gchar* _tmp153_ = NULL;
			gchar* _tmp154_ = NULL;
			ElektroSimParameter* _tmp155_ = NULL;
			ElektroSimParameter* _tmp156_ = NULL;
			gdouble _tmp157_ = 0.0;
			gdouble _tmp158_ = 0.0;
			gchar* _tmp159_ = NULL;
			gchar* _tmp160_ = NULL;
			gchar* _tmp161_ = NULL;
			gchar* _tmp162_ = NULL;
			gchar* _tmp163_ = NULL;
			_tmp123_ = line;
			_tmp124_ = g_strconcat (_tmp123_, "ac ", NULL);
			_g_free0 (line);
			line = _tmp124_;
			_tmp125_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "variation");
			_tmp126_ = _tmp125_;
			_tmp127_ = elektro_sim_parameter_get_val (_tmp126_);
			_tmp128_ = _tmp127_;
			_tmp129_ = (gint) _tmp128_;
			_g_object_unref0 (_tmp126_);
			switch (_tmp129_) {
				case ELEKTRO_SIM_SIMULATION_AC_VARIATION_DECADE:
				{
					const gchar* _tmp130_ = NULL;
					gchar* _tmp131_ = NULL;
					_tmp130_ = line;
					_tmp131_ = g_strconcat (_tmp130_, "dec ", NULL);
					_g_free0 (line);
					line = _tmp131_;
					break;
				}
				case ELEKTRO_SIM_SIMULATION_AC_VARIATION_OCTAVE:
				{
					const gchar* _tmp132_ = NULL;
					gchar* _tmp133_ = NULL;
					_tmp132_ = line;
					_tmp133_ = g_strconcat (_tmp132_, "oct ", NULL);
					_g_free0 (line);
					line = _tmp133_;
					break;
				}
				case ELEKTRO_SIM_SIMULATION_AC_VARIATION_LINEAIR:
				{
					const gchar* _tmp134_ = NULL;
					gchar* _tmp135_ = NULL;
					_tmp134_ = line;
					_tmp135_ = g_strconcat (_tmp134_, "lin ", NULL);
					_g_free0 (line);
					line = _tmp135_;
					break;
				}
				default:
				break;
			}
			_tmp136_ = line;
			_tmp137_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "points");
			_tmp138_ = _tmp137_;
			_tmp139_ = elektro_sim_parameter_get_val (_tmp138_);
			_tmp140_ = _tmp139_;
			_tmp141_ = double_to_string (_tmp140_);
			_tmp142_ = _tmp141_;
			_tmp143_ = g_strconcat (_tmp142_, " ", NULL);
			_tmp144_ = _tmp143_;
			_tmp145_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "start frequency");
			_tmp146_ = _tmp145_;
			_tmp147_ = elektro_sim_parameter_get_val (_tmp146_);
			_tmp148_ = _tmp147_;
			_tmp149_ = double_to_string (_tmp148_);
			_tmp150_ = _tmp149_;
			_tmp151_ = g_strconcat (_tmp144_, _tmp150_, NULL);
			_tmp152_ = _tmp151_;
			_tmp153_ = g_strconcat (_tmp152_, " ", NULL);
			_tmp154_ = _tmp153_;
			_tmp155_ = elektro_sim_component_get_parameter ((ElektroSimComponent*) self, "stop frequency");
			_tmp156_ = _tmp155_;
			_tmp157_ = elektro_sim_parameter_get_val (_tmp156_);
			_tmp158_ = _tmp157_;
			_tmp159_ = double_to_string (_tmp158_);
			_tmp160_ = _tmp159_;
			_tmp161_ = g_strconcat (_tmp154_, _tmp160_, NULL);
			_tmp162_ = _tmp161_;
			_tmp163_ = g_strconcat (_tmp136_, _tmp162_, NULL);
			_g_free0 (line);
			line = _tmp163_;
			_g_free0 (_tmp162_);
			_g_free0 (_tmp160_);
			_g_object_unref0 (_tmp156_);
			_g_free0 (_tmp154_);
			_g_free0 (_tmp152_);
			_g_free0 (_tmp150_);
			_g_object_unref0 (_tmp146_);
			_g_free0 (_tmp144_);
			_g_free0 (_tmp142_);
			_g_object_unref0 (_tmp138_);
			break;
		}
		default:
		break;
	}
	result = line;
	return result;
}


static void elektro_sim_simulation_class_init (ElektroSimSimulationClass * klass) {
	elektro_sim_simulation_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (ElektroSimSimulationPrivate));
	ELEKTRO_SIM_COMPONENT_CLASS (klass)->draw_image = elektro_sim_simulation_real_draw_image;
	ELEKTRO_SIM_COMPONENT_CLASS (klass)->clone = elektro_sim_simulation_real_clone;
	ELEKTRO_SIM_COMPONENT_CLASS (klass)->snap = elektro_sim_simulation_real_snap;
	ELEKTRO_SIM_COMPONENT_CLASS (klass)->get_netlist_line = elektro_sim_simulation_real_get_netlist_line;
	G_OBJECT_CLASS (klass)->finalize = elektro_sim_simulation_finalize;
}


static void elektro_sim_simulation_instance_init (ElektroSimSimulation * self) {
	self->priv = ELEKTRO_SIM_SIMULATION_GET_PRIVATE (self);
}


static void elektro_sim_simulation_finalize (GObject* obj) {
	ElektroSimSimulation * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, ELEKTRO_SIM_TYPE_SIMULATION, ElektroSimSimulation);
	_g_object_unref0 (self->priv->optionsAdded);
	_g_object_unref0 (self->priv->dcOptionsAdded);
	G_OBJECT_CLASS (elektro_sim_simulation_parent_class)->finalize (obj);
}


GType elektro_sim_simulation_get_type (void) {
	static volatile gsize elektro_sim_simulation_type_id__volatile = 0;
	if (g_once_init_enter (&elektro_sim_simulation_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (ElektroSimSimulationClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) elektro_sim_simulation_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (ElektroSimSimulation), 0, (GInstanceInitFunc) elektro_sim_simulation_instance_init, NULL };
		GType elektro_sim_simulation_type_id;
		elektro_sim_simulation_type_id = g_type_register_static (ELEKTRO_SIM_TYPE_COMPONENT, "ElektroSimSimulation", &g_define_type_info, 0);
		g_once_init_leave (&elektro_sim_simulation_type_id__volatile, elektro_sim_simulation_type_id);
	}
	return elektro_sim_simulation_type_id__volatile;
}



